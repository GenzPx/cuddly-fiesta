<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="description" content="Door To Door - Horror Survival Game">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Door To Door - Horror Survival</title>
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #141414;
            --bg-tertiary: #1f1f1f;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --accent-red: #e50914;
            --accent-gold: #ffd700;
            --accent-green: #46d369;
            --accent-blue: #0080ff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        /* Screen Container */
        .screen {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }

        .screen.active {
            display: flex;
        }

        .screen.scrollable {
            justify-content: flex-start;
            overflow-y: auto;
            padding-top: 60px;
            padding-bottom: 40px;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes violentShake {
            0% { transform: translate(0, 0) rotate(0deg); }
            10% { transform: translate(-25px, -25px) rotate(-5deg); }
            20% { transform: translate(25px, 25px) rotate(5deg); }
            30% { transform: translate(-25px, 25px) rotate(-5deg); }
            40% { transform: translate(25px, -25px) rotate(5deg); }
            50% { transform: translate(-25px, 0) rotate(-5deg); }
            60% { transform: translate(25px, 0) rotate(5deg); }
            70% { transform: translate(0, -25px) rotate(-5deg); }
            80% { transform: translate(0, 25px) rotate(5deg); }
            90% { transform: translate(-25px, -25px) rotate(-5deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }

        @keyframes glitch {
            0% { clip-path: inset(40% 0 61% 0); }
            20% { clip-path: inset(92% 0 1% 0); }
            40% { clip-path: inset(43% 0 1% 0); }
            60% { clip-path: inset(25% 0 58% 0); }
            80% { clip-path: inset(54% 0 7% 0); }
            100% { clip-path: inset(58% 0 43% 0); }
        }

        @keyframes flicker {
            0%, 100% { opacity: 1; }
            10% { opacity: 0; }
            20% { opacity: 1; }
            30% { opacity: 0; }
            40% { opacity: 1; }
            50% { opacity: 0; }
            60% { opacity: 1; }
            70% { opacity: 0; }
            80% { opacity: 1; }
            90% { opacity: 0; }
        }

        @keyframes zoomPulse {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.5) rotate(5deg); }
            50% { transform: scale(0.8) rotate(-5deg); }
            75% { transform: scale(1.3) rotate(3deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        @keyframes colorShift {
            0% { filter: hue-rotate(0deg); }
            25% { filter: hue-rotate(90deg); }
            50% { filter: hue-rotate(180deg); }
            75% { filter: hue-rotate(270deg); }
            100% { filter: hue-rotate(360deg); }
        }

        @keyframes invertFlash {
            0%, 100% { filter: invert(0); }
            50% { filter: invert(1); }
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        @keyframes scaleIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px var(--accent-gold), 0 0 10px var(--accent-gold); }
            50% { box-shadow: 0 0 20px var(--accent-gold), 0 0 30px var(--accent-gold); }
        }

        @keyframes ghostGlow {
            0%, 100% { box-shadow: 0 0 10px var(--accent-red), 0 0 20px var(--accent-red), 0 0 30px var(--accent-red); }
            50% { box-shadow: 0 0 20px var(--accent-red), 0 0 40px var(--accent-red), 0 0 60px var(--accent-red); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes doorOpen {
            from { transform: perspective(800px) rotateY(0deg); }
            to { transform: perspective(800px) rotateY(-75deg); }
        }

        @keyframes timerWarning {
            0%, 100% { background: var(--accent-red); }
            50% { background: #ff4444; }
        }

        @keyframes toastIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes toastOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        @keyframes goldShimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }

        /* Buttons */
        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 48px;
            min-width: 48px;
        }

        .btn:active {
            transform: scale(0.96);
        }

        .btn-primary {
            background: var(--accent-red);
            color: white;
        }

        .btn-primary:hover {
            background: #ff1a1a;
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid #333;
        }

        .btn-gold {
            background: linear-gradient(135deg, var(--accent-gold), #ffaa00);
            color: #000;
        }

        .btn-green {
            background: var(--accent-green);
            color: #000;
        }

        .btn-danger {
            background: transparent;
            border: 2px solid var(--accent-red);
            color: var(--accent-red);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Form Elements */
        .input-group {
            width: 100%;
            margin-bottom: 16px;
        }

        .input-group label {
            display: block;
            margin-bottom: 6px;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .input-wrapper {
            position: relative;
        }

        .input-wrapper input {
            width: 100%;
            padding: 14px;
            padding-right: 48px;
            background: var(--bg-tertiary);
            border: 1px solid #333;
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 16px;
            outline: none;
            transition: border-color 0.2s;
        }

        .input-wrapper input:focus {
            border-color: var(--accent-red);
        }

        .toggle-password {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
        }

        .toggle-password svg {
            width: 20px;
            height: 20px;
            fill: var(--text-secondary);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 12px 0;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--accent-red);
        }

        .checkbox-group label {
            color: var(--text-secondary);
            font-size: 14px;
        }

        select {
            width: 100%;
            padding: 14px;
            background: var(--bg-tertiary);
            border: 1px solid #333;
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 16px;
            outline: none;
        }

        /* Cards */
        .card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #222;
        }

        /* Toast */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .toast {
            background: var(--bg-secondary);
            padding: 14px 20px;
            border-radius: 8px;
            border-left: 4px solid var(--accent-green);
            animation: toastIn 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 300px;
        }

        .toast.error {
            border-left-color: var(--accent-red);
        }

        .toast.warning {
            border-left-color: var(--accent-gold);
        }

        .toast.hiding {
            animation: toastOut 0.3s ease forwards;
        }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 24px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            animation: scaleIn 0.3s ease;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            font-size: 24px;
            margin-top: 10px;
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .modal-footer {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 56px;
            background: var(--bg-secondary);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            z-index: 100;
            border-bottom: 1px solid #222;
        }

        .header-title {
            font-size: 18px;
            font-weight: 600;
        }

        .header-btn {
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
        }

        .header-btn svg {
            width: 24px;
            height: 24px;
            fill: var(--text-primary);
        }

        /* Hamburger Menu */
        .hamburger-menu {
            position: fixed;
            top: 0;
            right: -280px;
            width: 280px;
            height: 100%;
            background: var(--bg-secondary);
            z-index: 200;
            transition: right 0.3s ease;
            padding: 20px;
            border-left: 1px solid #222;
        }

        .hamburger-menu.active {
            right: 0;
        }

        .hamburger-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 199;
        }

        .hamburger-overlay.active {
            display: block;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
            margin-bottom: 8px;
        }

        .menu-item:hover {
            background: var(--bg-tertiary);
        }

        .menu-item svg {
            width: 24px;
            height: 24px;
            fill: var(--text-secondary);
        }

        .menu-item span {
            font-size: 16px;
        }

        /* WARNING SCREEN */
        #warning-screen .warning-icon {
            width: 80px;
            height: 80px;
            fill: var(--accent-red);
            animation: pulse 1.5s infinite;
        }

        #warning-screen h1 {
            color: var(--accent-red);
            font-size: 32px;
            margin: 20px 0;
        }

        .warning-box {
            background: var(--bg-secondary);
            border: 1px solid var(--accent-red);
            border-radius: 12px;
            padding: 20px;
            max-width: 500px;
            margin-bottom: 30px;
        }

        .warning-section {
            margin-bottom: 16px;
        }

        .warning-section h3 {
            color: var(--accent-red);
            margin-bottom: 8px;
            font-size: 14px;
        }

        .warning-section ul {
            list-style: none;
            padding-left: 0;
        }

        .warning-section li {
            color: var(--text-secondary);
            padding: 4px 0;
            padding-left: 20px;
            position: relative;
            font-size: 14px;
        }

        .warning-section li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 6px;
            height: 6px;
            background: var(--accent-red);
            border-radius: 50%;
        }

        /* AUTH SCREEN */
        #auth-screen {
            padding: 40px 20px;
        }

        .auth-avatar {
            width: 100px;
            height: 100px;
            background: var(--bg-tertiary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            cursor: pointer;
            border: 3px solid #333;
        }

        .auth-avatar svg {
            width: 50px;
            height: 50px;
            fill: var(--text-secondary);
        }

        .auth-tabs {
            display: flex;
            gap: 0;
            margin-bottom: 24px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 4px;
        }

        .auth-tab {
            flex: 1;
            padding: 12px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .auth-tab.active {
            background: var(--accent-red);
            color: white;
        }

        .auth-form {
            width: 100%;
            max-width: 350px;
        }

        .auth-form > div {
            display: none;
        }

        .auth-form > div.active {
            display: block;
        }

        .forgot-link {
            color: var(--accent-blue);
            font-size: 14px;
            text-decoration: none;
            display: inline-block;
            margin-top: 10px;
            cursor: pointer;
        }

        .security-section {
            display: none;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #333;
        }

        .security-section.active {
            display: block;
        }

        /* LOADING SCREEN */
        #loading-screen .loading-icon {
            width: 120px;
            height: 120px;
            fill: var(--accent-red);
            animation: float 2s ease-in-out infinite;
        }

        #loading-screen h1 {
            font-size: 36px;
            background: linear-gradient(135deg, var(--accent-red), #ff4444);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 20px 0 10px;
        }

        .progress-container {
            width: 100%;
            max-width: 300px;
            margin: 30px 0 20px;
        }

        .progress-bar {
            height: 6px;
            background: var(--bg-tertiary);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--accent-red), var(--accent-gold));
            border-radius: 3px;
            transition: width 0.1s;
        }

        .loading-text {
            color: var(--text-secondary);
            font-size: 14px;
            margin-top: 10px;
        }

        /* MAIN MENU */
        #main-menu {
            padding-top: 70px;
        }

        .menu-logo {
            width: 120px;
            height: 120px;
            fill: var(--accent-red);
            cursor: pointer;
            margin-bottom: 10px;
        }

        .menu-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .menu-subtitle {
            color: var(--text-secondary);
            font-size: 12px;
            letter-spacing: 3px;
            margin-bottom: 30px;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            width: 100%;
            max-width: 300px;
            margin-bottom: 30px;
        }

        .menu-card {
            background: var(--bg-secondary);
            border: 1px solid #333;
            border-radius: 12px;
            padding: 24px 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .menu-card:hover {
            transform: translateY(-4px);
            border-color: var(--accent-red);
        }

        .menu-card svg {
            width: 36px;
            height: 36px;
            fill: var(--accent-red);
            margin-bottom: 8px;
        }

        .menu-card span {
            display: block;
            font-weight: 600;
            font-size: 14px;
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 24px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: 12px;
            width: 100%;
            max-width: 350px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stat-item svg {
            width: 20px;
            height: 20px;
        }

        .stat-item span {
            font-weight: 600;
        }

        .lives-indicator {
            display: flex;
            gap: 2px;
        }

        .lives-indicator svg {
            width: 16px;
            height: 16px;
        }

        .countdown-text {
            color: var(--text-secondary);
            font-size: 12px;
            margin-top: 10px;
        }

        /* GAMEPLAY */
        #gameplay-screen {
            padding: 0;
            background: linear-gradient(180deg, #0a0a0a 0%, #1a0a0a 100%);
        }

        .game-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 12px 16px;
            background: var(--bg-secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 50;
            border-bottom: 1px solid #222;
        }

        .game-stats {
            display: flex;
            gap: 16px;
        }

        .game-stat {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 14px;
        }

        .game-stat svg {
            width: 18px;
            height: 18px;
        }

        .game-level {
            font-size: 14px;
            font-weight: 600;
        }

        .exit-btn {
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
        }

        .exit-btn svg {
            width: 24px;
            height: 24px;
            fill: var(--text-secondary);
        }

        .timer-container {
            position: fixed;
            top: 60px;
            left: 16px;
            right: 16px;
            z-index: 49;
        }

        .timer-bar {
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }

        .timer-fill {
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, var(--accent-green), var(--accent-gold), var(--accent-red));
            border-radius: 4px;
            transition: width 0.1s linear;
        }

        .timer-fill.warning {
            animation: timerWarning 0.5s infinite;
        }

        .timer-text {
            text-align: center;
            font-size: 14px;
            margin-top: 4px;
            color: var(--text-secondary);
        }

        .doors-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: clamp(10px, 3vw, 20px);
            margin-top: 100px;
            padding: 20px;
        }

        .door {
            width: clamp(80px, 22vw, 140px);
            height: clamp(140px, 38vw, 240px);
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            transform-style: preserve-3d;
        }

        .door:hover {
            transform: translateY(-10px);
        }

        .door.opening {
            animation: doorOpen 0.5s forwards;
            transform-origin: left center;
        }

        .door.ghost-glow {
            animation: ghostGlow 1s infinite !important;
        }

        /* Door 1 - Kayu Klasik */
        .door-1 {
            background: linear-gradient(180deg, #8B4513 0%, #654321 50%, #4a3520 100%);
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5), 0 10px 30px rgba(0,0,0,0.5);
        }

        .door-1::before {
            content: '';
            position: absolute;
            top: 20%;
            left: 15%;
            width: 70%;
            height: 25%;
            background: linear-gradient(180deg, #9a5c2e 0%, #7a4a24 100%);
            border: 2px solid #5a3a1a;
            border-radius: 2px;
        }

        .door-1::after {
            content: '';
            position: absolute;
            top: 55%;
            left: 15%;
            width: 70%;
            height: 25%;
            background: linear-gradient(180deg, #9a5c2e 0%, #7a4a24 100%);
            border: 2px solid #5a3a1a;
            border-radius: 2px;
        }

        .door-handle-1 {
            position: absolute;
            right: 15%;
            top: 50%;
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, #ffd700, #b8860b);
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.5);
            z-index: 1;
        }

        /* Door 2 - Metal Futuristik */
        .door-2 {
            background: linear-gradient(180deg, #2c3e50 0%, #1a252f 50%, #0d1318 100%);
            box-shadow: inset 0 0 20px rgba(0,128,255,0.2), 0 10px 30px rgba(0,0,0,0.5);
            border: 1px solid #3498db;
        }

        .door-2::before {
            content: '';
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, rgba(0,128,255,0.3), transparent);
            border: 2px solid #3498db;
            border-radius: 50%;
        }

        .door-handle-2 {
            position: absolute;
            right: 10%;
            top: 45%;
            width: 8px;
            height: 30px;
            background: linear-gradient(180deg, #bdc3c7, #95a5a6);
            border-radius: 4px;
            z-index: 1;
        }

        /* Door 3 - Gothic Horror */
        .door-3 {
            background: linear-gradient(180deg, #4a0e4e 0%, #2d0a30 50%, #1a0520 100%);
            box-shadow: inset 0 0 20px rgba(139,0,0,0.3), 0 10px 30px rgba(0,0,0,0.5);
            border-radius: 40% 40% 0 0;
        }

        .door-3::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-bottom: 30px solid #8b0000;
        }

        .door-handle-3 {
            position: absolute;
            right: 15%;
            top: 50%;
            width: 10px;
            height: 20px;
            background: linear-gradient(180deg, #8b0000, #5c0000);
            border-radius: 2px;
            z-index: 1;
        }

        .game-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 16px;
            background: var(--bg-secondary);
            text-align: center;
            border-top: 1px solid #222;
        }

        .streak-display {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .streak-display svg {
            width: 20px;
            height: 20px;
            fill: var(--accent-gold);
        }

        .streak-count {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent-gold);
        }

        .hint-text {
            color: var(--text-secondary);
            font-size: 12px;
        }

        /* LEVEL SELECT */
        #level-screen {
            padding-top: 70px;
        }

        .level-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            width: 100%;
            max-width: 350px;
            padding: 20px;
        }

        .level-card {
            aspect-ratio: 1;
            background: var(--bg-secondary);
            border: 2px solid #333;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .level-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .level-card.current {
            border-color: var(--accent-gold);
            animation: glow 2s infinite;
        }

        .level-card.completed {
            border-color: var(--accent-green);
        }

        .level-card svg {
            width: 20px;
            height: 20px;
            margin-bottom: 4px;
        }

        .level-num {
            font-size: 18px;
            font-weight: 700;
        }

        .level-time {
            font-size: 10px;
            color: var(--text-secondary);
        }

        /* SHOP */
        #shop-screen {
            padding-top: 70px;
        }

        .balance-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: 12px;
            margin-bottom: 24px;
        }

        .shop-items {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
            max-width: 350px;
        }

        .shop-item {
            background: var(--bg-secondary);
            border: 1px solid #333;
            border-radius: 12px;
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .shop-item-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .shop-item-info svg {
            width: 32px;
            height: 32px;
        }

        .shop-item-name {
            font-weight: 600;
        }

        .shop-item-desc {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .shop-section-title {
            font-size: 18px;
            font-weight: 600;
            margin: 24px 0 12px;
            width: 100%;
            max-width: 350px;
        }

        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            width: 100%;
            max-width: 350px;
        }

        .avatar-item {
            aspect-ratio: 1;
            background: var(--bg-secondary);
            border: 2px solid #333;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            padding: 8px;
        }

        .avatar-item:hover {
            border-color: var(--accent-gold);
        }

        .avatar-item.selected {
            border-color: var(--accent-green);
        }

        .avatar-item.premium {
            border-color: var(--accent-gold);
            background: linear-gradient(135deg, #1a1500, #332900);
        }

        .avatar-item svg {
            width: 100%;
            height: 100%;
        }

        /* PROFILE */
        #profile-screen {
            padding-top: 70px;
            align-items: flex-start;
        }

        .profile-card {
            background: var(--bg-secondary);
            border: 1px solid #333;
            border-radius: 16px;
            padding: 24px;
            width: 100%;
            max-width: 350px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .profile-card.verified {
            background: linear-gradient(135deg, #1a1500 0%, #332900 50%, #1a1500 100%);
            background-size: 200% 200%;
            animation: goldShimmer 3s linear infinite;
            border-color: var(--accent-gold);
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            background: var(--bg-tertiary);
            border-radius: 50%;
            margin: 0 auto 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid #444;
        }

        .profile-avatar svg {
            width: 40px;
            height: 40px;
            fill: var(--text-secondary);
        }

        .profile-name {
            font-size: 24px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .verified-badge {
            width: 24px;
            height: 24px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            width: 100%;
            max-width: 350px;
        }

        .stats-card {
            background: var(--bg-secondary);
            border: 1px solid #333;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
        }

        .stats-card svg {
            width: 24px;
            height: 24px;
            fill: var(--accent-red);
            margin-bottom: 8px;
        }

        .stats-value {
            font-size: 24px;
            font-weight: 700;
        }

        .stats-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* ACHIEVEMENTS */
        #achievements-screen {
            padding-top: 70px;
        }

        .achievements-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
            max-width: 350px;
            padding: 0 20px;
        }

        .achievement-card {
            background: var(--bg-secondary);
            border: 2px solid #333;
            border-radius: 12px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 16px;
            opacity: 0.6;
        }

        .achievement-card.unlocked {
            border-color: var(--accent-gold);
            opacity: 1;
        }

        .achievement-icon {
            width: 48px;
            height: 48px;
            background: var(--bg-tertiary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .achievement-icon svg {
            width: 24px;
            height: 24px;
            fill: var(--text-secondary);
        }

        .achievement-card.unlocked .achievement-icon svg {
            fill: var(--accent-gold);
        }

        .achievement-info {
            flex: 1;
        }

        .achievement-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .achievement-desc {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .achievement-status svg {
            width: 24px;
            height: 24px;
        }

        /* SETTINGS */
        #settings-screen {
            padding-top: 70px;
        }

        .settings-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
            max-width: 350px;
            padding: 0 20px;
        }

        .setting-item {
            background: var(--bg-secondary);
            border: 1px solid #333;
            border-radius: 12px;
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .setting-label {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .setting-label svg {
            width: 24px;
            height: 24px;
            fill: var(--text-secondary);
        }

        .toggle-switch {
            width: 52px;
            height: 28px;
            background: var(--bg-tertiary);
            border-radius: 14px;
            position: relative;
            cursor: pointer;
            transition: background 0.3s;
        }

        .toggle-switch.active {
            background: var(--accent-green);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 22px;
            height: 22px;
            background: white;
            border-radius: 50%;
            top: 3px;
            left: 3px;
            transition: transform 0.3s;
        }

        .toggle-switch.active::after {
            transform: translateX(24px);
        }

        .danger-zone {
            margin-top: 30px;
            padding: 20px;
            border: 2px solid var(--accent-red);
            border-radius: 12px;
            width: 100%;
            max-width: 350px;
        }

        .danger-zone h3 {
            color: var(--accent-red);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .danger-zone h3 svg {
            width: 20px;
            height: 20px;
            fill: var(--accent-red);
        }

        .danger-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        /* ABOUT */
        #about-screen {
            padding-top: 70px;
            align-items: flex-start;
        }

        .about-content {
            width: 100%;
            max-width: 500px;
            padding: 0 20px 40px;
        }

        .about-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .about-header svg {
            width: 80px;
            height: 80px;
            fill: var(--accent-red);
        }

        .about-header h1 {
            font-size: 28px;
            margin: 16px 0 8px;
        }

        .about-header .version {
            color: var(--text-secondary);
        }

        .about-section {
            margin-bottom: 24px;
        }

        .about-section h3 {
            color: var(--accent-red);
            margin-bottom: 12px;
            font-size: 16px;
        }

        .about-section p, .about-section li {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 14px;
        }

        .about-section ul {
            list-style: disc;
            padding-left: 20px;
        }

        .about-section li {
            margin-bottom: 4px;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .social-link {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            background: var(--bg-secondary);
            border-radius: 8px;
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.2s;
        }

        .social-link:hover {
            background: var(--bg-tertiary);
        }

        .social-link svg {
            width: 20px;
            height: 20px;
            fill: var(--text-secondary);
        }

        .copyright {
            text-align: center;
            color: var(--text-secondary);
            font-size: 12px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #333;
        }

        /* JUMPSCARE */
        .jumpscare-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .jumpscare-overlay.active {
            display: flex;
        }

        .jumpscare-face {
            width: 80vw;
            height: 80vh;
            max-width: 600px;
            max-height: 600px;
            fill: var(--accent-red);
        }

        .jumpscare-overlay.effect-shake {
            animation: violentShake 0.1s infinite;
        }

        .jumpscare-overlay.effect-glitch .jumpscare-face {
            animation: glitch 0.1s infinite;
        }

        .jumpscare-overlay.effect-flicker {
            animation: flicker 0.1s infinite;
        }

        .jumpscare-overlay.effect-zoom .jumpscare-face {
            animation: zoomPulse 0.2s infinite;
        }

        .jumpscare-overlay.effect-color {
            animation: colorShift 0.2s infinite;
        }

        .jumpscare-overlay.effect-invert {
            animation: invertFlash 0.1s infinite;
        }

        .secondary-face {
            position: absolute;
            width: 40vw;
            height: 40vh;
            fill: var(--accent-red);
            opacity: 0;
        }

        .secondary-face.flash {
            opacity: 1;
        }

        /* Daily Claim Modal */
        .daily-days {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .daily-day {
            width: 40px;
            height: 50px;
            background: var(--bg-tertiary);
            border: 2px solid #333;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .daily-day.claimed {
            border-color: var(--accent-green);
            background: rgba(70, 211, 105, 0.1);
        }

        .daily-day.current {
            border-color: var(--accent-gold);
            animation: glow 2s infinite;
        }

        .daily-day.locked {
            opacity: 0.5;
        }

        .daily-day svg {
            width: 16px;
            height: 16px;
            margin-bottom: 2px;
        }

        /* Cheat Menu */
        .cheat-controls {
            display: none;
        }

        .cheat-controls.active {
            display: block;
        }

        .cheat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #333;
        }

        .cheat-label {
            font-weight: 600;
        }

        .cheat-buttons {
            display: flex;
            gap: 8px;
        }

        .cheat-btn {
            width: 36px;
            height: 36px;
            background: var(--bg-tertiary);
            border: 1px solid #444;
            border-radius: 8px;
            color: white;
            font-size: 18px;
            cursor: pointer;
        }

        .cheat-value {
            min-width: 50px;
            text-align: center;
        }

        /* Debug Modal */
        .debug-accounts {
            max-height: 400px;
            overflow-y: auto;
        }

        .debug-account {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
        }

        .debug-account-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .debug-account-name {
            font-weight: 600;
        }

        .debug-account-info {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .debug-account-info div {
            margin: 2px 0;
        }

        /* How To Play */
        .how-to-section {
            margin-bottom: 16px;
        }

        .how-to-section h4 {
            color: var(--accent-gold);
            margin-bottom: 8px;
        }

        .how-to-section p {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Jumpscare Overlay -->
    <div class="jumpscare-overlay" id="jumpscare-overlay">
        <svg class="jumpscare-face" id="jumpscare-face" viewBox="0 0 100 100"></svg>
        <svg class="secondary-face" id="secondary-face" viewBox="0 0 100 100"></svg>
    </div>

    <!-- WARNING SCREEN -->
    <div class="screen active" id="warning-screen">
        <svg class="warning-icon" viewBox="0 0 24 24">
            <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
        </svg>
        <h1>PERINGATAN!</h1>
        <div class="warning-box">
            <div class="warning-section">
                <h3>KONTEN GAME INI MENGANDUNG:</h3>
                <ul>
                    <li>Jumpscare mendadak</li>
                    <li>Suara keras dan mengejutkan</li>
                    <li>Efek visual yang intens</li>
                    <li>Getaran perangkat</li>
                </ul>
            </div>
            <div class="warning-section">
                <h3>TIDAK DISARANKAN UNTUK:</h3>
                <ul>
                    <li>Penderita epilepsi</li>
                    <li>Penderita gangguan jantung</li>
                    <li>Anak di bawah 13 tahun</li>
                    <li>Orang yang mudah panik</li>
                </ul>
            </div>
            <div class="warning-section">
                <h3>REKOMENDASI:</h3>
                <ul>
                    <li>Gunakan headphone untuk pengalaman terbaik</li>
                    <li>Mainkan di ruangan yang cukup terang</li>
                    <li>Siapkan mental sebelum bermain</li>
                </ul>
            </div>
        </div>
        <button class="btn btn-primary" onclick="game.goToAuth()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </svg>
            SAYA MENGERTI & LANJUTKAN
        </button>
    </div>

    <!-- AUTH SCREEN -->
    <div class="screen" id="auth-screen">
        <div class="auth-avatar" id="auth-avatar" onclick="game.avatarClick()">
            <svg viewBox="0 0 24 24">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
        </div>
        <div class="auth-tabs">
            <button class="auth-tab active" onclick="game.switchAuthTab('login')">LOGIN</button>
            <button class="auth-tab" onclick="game.switchAuthTab('register')">REGISTER</button>
        </div>
        <div class="auth-form">
            <!-- Login Form -->
            <div id="login-form" class="active">
                <div class="input-group">
                    <label>Username</label>
                    <div class="input-wrapper">
                        <input type="text" id="login-username" placeholder="Masukkan username">
                    </div>
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <div class="input-wrapper">
                        <input type="password" id="login-password" placeholder="Masukkan password">
                        <button class="toggle-password" onclick="game.togglePassword('login-password')">
                            <svg viewBox="0 0 24 24" class="eye-icon">
                                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="remember-me">
                    <label for="remember-me">Ingat saya</label>
                </div>
                <button class="btn btn-primary" style="width: 100%;" onclick="game.login()">LOGIN</button>
                <a class="forgot-link" onclick="game.showForgotPassword()">Lupa Password?</a>
            </div>

            <!-- Register Form -->
            <div id="register-form">
                <div class="input-group">
                    <label>Username</label>
                    <div class="input-wrapper">
                        <input type="text" id="register-username" placeholder="Pilih username">
                    </div>
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <div class="input-wrapper">
                        <input type="password" id="register-password" placeholder="Buat password">
                        <button class="toggle-password" onclick="game.togglePassword('register-password')">
                            <svg viewBox="0 0 24 24" class="eye-icon">
                                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="input-group">
                    <label>Konfirmasi Password</label>
                    <div class="input-wrapper">
                        <input type="password" id="register-confirm" placeholder="Ulangi password">
                        <button class="toggle-password" onclick="game.togglePassword('register-confirm')">
                            <svg viewBox="0 0 24 24" class="eye-icon">
                                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="ultra-safe-mode" onchange="game.toggleSecuritySection()">
                    <label for="ultra-safe-mode">Ultra Safe Mode (Pemulihan Akun)</label>
                </div>
                <div class="security-section" id="security-section">
                    <div class="input-group">
                        <label>Pertanyaan Keamanan</label>
                        <select id="security-question">
                            <option value="">Pilih pertanyaan...</option>
                            <option value="pet">Nama hewan peliharaan pertama?</option>
                            <option value="city">Kota kelahiran Anda?</option>
                            <option value="school">Nama sekolah dasar Anda?</option>
                            <option value="food">Makanan favorit Anda?</option>
                            <option value="friend">Nama sahabat masa kecil?</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Jawaban Keamanan</label>
                        <div class="input-wrapper">
                            <input type="text" id="security-answer" placeholder="Masukkan jawaban">
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary" style="width: 100%;" onclick="game.register()">REGISTER</button>
            </div>

            <!-- Forgot Password Form -->
            <div id="forgot-form">
                <div id="forgot-step-1">
                    <div class="input-group">
                        <label>Username</label>
                        <div class="input-wrapper">
                            <input type="text" id="forgot-username" placeholder="Masukkan username">
                        </div>
                    </div>
                    <button class="btn btn-primary" style="width: 100%;" onclick="game.checkForgotUsername()">LANJUTKAN</button>
                </div>
                <div id="forgot-step-2" style="display: none;">
                    <p id="forgot-question-text" style="margin-bottom: 16px; color: var(--text-secondary);"></p>
                    <div class="input-group">
                        <label>Jawaban</label>
                        <div class="input-wrapper">
                            <input type="text" id="forgot-answer" placeholder="Masukkan jawaban">
                        </div>
                    </div>
                    <button class="btn btn-primary" style="width: 100%;" onclick="game.verifySecurityAnswer()">VERIFIKASI</button>
                </div>
                <div id="forgot-step-3" style="display: none;">
                    <div class="input-group">
                        <label>Password Baru</label>
                        <div class="input-wrapper">
                            <input type="password" id="forgot-new-password" placeholder="Masukkan password baru">
                            <button class="toggle-password" onclick="game.togglePassword('forgot-new-password')">
                                <svg viewBox="0 0 24 24" class="eye-icon">
                                    <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <button class="btn btn-primary" style="width: 100%;" onclick="game.resetPassword()">RESET PASSWORD</button>
                </div>
                <a class="forgot-link" onclick="game.switchAuthTab('login')" style="margin-top: 16px; display: block;">Kembali ke Login</a>
            </div>
        </div>
    </div>

    <!-- LOADING SCREEN -->
    <div class="screen" id="loading-screen">
        <svg class="loading-icon" viewBox="0 0 100 100">
            <rect x="25" y="10" width="50" height="80" rx="3" fill="none" stroke="currentColor" stroke-width="3"/>
            <rect x="30" y="15" width="40" height="30" rx="2" fill="currentColor" opacity="0.3"/>
            <rect x="30" y="50" width="40" height="30" rx="2" fill="currentColor" opacity="0.3"/>
            <circle cx="65" cy="50" r="4" fill="currentColor"/>
        </svg>
        <h1>Door To Door</h1>
        <p style="color: var(--text-secondary); font-size: 12px; letter-spacing: 2px;">HORROR SURVIVAL</p>
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="loading-progress"></div>
            </div>
        </div>
        <p class="loading-text" id="loading-text">Mempersiapkan pintu...</p>
    </div>

    <!-- MAIN MENU -->
    <div class="screen" id="main-menu">
        <div class="header">
            <span></span>
            <span class="header-title">MENU UTAMA</span>
            <button class="header-btn" onclick="game.toggleHamburger()">
                <svg viewBox="0 0 24 24">
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                </svg>
            </button>
        </div>
        
        <svg class="menu-logo" id="menu-logo" viewBox="0 0 100 100" onclick="game.logoClick()">
            <rect x="20" y="10" width="60" height="85" rx="3" fill="none" stroke="currentColor" stroke-width="4"/>
            <rect x="28" y="18" width="44" height="32" rx="2" fill="currentColor" opacity="0.3"/>
            <rect x="28" y="55" width="44" height="32" rx="2" fill="currentColor" opacity="0.3"/>
            <circle cx="70" cy="52" r="5" fill="currentColor"/>
        </svg>
        <h1 class="menu-title">Door To Door</h1>
        <p class="menu-subtitle">CREATED BY GENZ</p>
        
        <div class="menu-grid">
            <div class="menu-card" onclick="game.startGame()">
                <svg viewBox="0 0 24 24">
                    <path d="M8 5v14l11-7z"/>
                </svg>
                <span>MULAI</span>
            </div>
            <div class="menu-card" onclick="game.showScreen('level-screen')">
                <svg viewBox="0 0 24 24">
                    <path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"/>
                </svg>
                <span>LEVEL</span>
            </div>
            <div class="menu-card" onclick="game.showScreen('shop-screen')">
                <svg viewBox="0 0 24 24">
                    <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
                </svg>
                <span>TOKO</span>
            </div>
            <div class="menu-card" onclick="game.showScreen('profile-screen')">
                <svg viewBox="0 0 24 24">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
                <span>PROFIL</span>
            </div>
        </div>
        
        <div class="stats-bar">
            <div class="stat-item">
                <svg viewBox="0 0 24 24" fill="#e50914">
                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                </svg>
                <div class="lives-indicator" id="lives-indicator"></div>
            </div>
            <div class="stat-item">
                <svg viewBox="0 0 24 24" fill="#0080ff">
                    <path d="M12 2L1 21h22L12 2zm0 3.99L19.53 19H4.47L12 5.99z"/>
                </svg>
                <span id="menu-diamonds">0</span>
            </div>
            <div class="stat-item">
                <svg viewBox="0 0 24 24" fill="#ffd700">
                    <path d="M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2zM5 8V7h2v3.82C5.84 10.4 5 9.3 5 8zm14 0c0 1.3-.84 2.4-2 2.82V7h2v1z"/>
                </svg>
                <span>Lv.<span id="menu-level">1</span></span>
            </div>
        </div>
        <p class="countdown-text" id="countdown-text"></p>
    </div>

    <!-- Hamburger Menu -->
    <div class="hamburger-overlay" id="hamburger-overlay" onclick="game.toggleHamburger()"></div>
    <div class="hamburger-menu" id="hamburger-menu">
        <h3 style="margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #333;">Menu</h3>
        <div class="menu-item" onclick="game.showScreen('achievements-screen'); game.toggleHamburger();">
            <svg viewBox="0 0 24 24">
                <path d="M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2z"/>
            </svg>
            <span>Achievement</span>
        </div>
        <div class="menu-item" onclick="game.showScreen('settings-screen'); game.toggleHamburger();">
            <svg viewBox="0 0 24 24">
                <path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
            </svg>
            <span>Pengaturan</span>
        </div>
        <div class="menu-item" onclick="game.showHowToPlay(); game.toggleHamburger();">
            <svg viewBox="0 0 24 24">
                <path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/>
            </svg>
            <span>Cara Bermain</span>
        </div>
        <div class="menu-item" onclick="game.showScreen('about-screen'); game.toggleHamburger();">
            <svg viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
            </svg>
            <span>Tentang</span>
        </div>
    </div>

    <!-- GAMEPLAY SCREEN -->
    <div class="screen" id="gameplay-screen">
        <div class="game-header">
            <div class="game-stats">
                <div class="game-stat">
                    <svg viewBox="0 0 24 24" fill="#e50914">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                    <span id="game-lives">3</span>
                </div>
                <div class="game-stat">
                    <svg viewBox="0 0 24 24" fill="#0080ff">
                        <path d="M12 2L1 21h22L12 2z"/>
                    </svg>
                    <span id="game-diamonds">0</span>
                </div>
            </div>
            <span class="game-level" id="game-level-text">Level 1 (Pintu 1/10)</span>
            <button class="exit-btn" onclick="game.showExitConfirm()">
                <svg viewBox="0 0 24 24">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
            </button>
        </div>
        
        <div class="timer-container">
            <div class="timer-bar">
                <div class="timer-fill" id="timer-fill"></div>
            </div>
            <p class="timer-text" id="timer-text">40.0s</p>
        </div>
        
        <div class="doors-container">
            <div class="door door-1" onclick="game.selectDoor(1)">
                <div class="door-handle-1"></div>
            </div>
            <div class="door door-2" onclick="game.selectDoor(2)">
                <div class="door-handle-2"></div>
            </div>
            <div class="door door-3" onclick="game.selectDoor(3)">
                <div class="door-handle-3"></div>
            </div>
        </div>
        
        <div class="game-footer">
            <div class="streak-display">
                <svg viewBox="0 0 24 24">
                    <path d="M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"/>
                </svg>
                <span class="streak-count" id="streak-count">0</span>
            </div>
            <p class="hint-text" id="hint-text">Pilih pintu yang benar untuk melanjutkan</p>
        </div>
    </div>

    <!-- LEVEL SELECT SCREEN -->
    <div class="screen" id="level-screen">
        <div class="header">
            <button class="header-btn" onclick="game.showScreen('main-menu')">
                <svg viewBox="0 0 24 24">
                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                </svg>
            </button>
            <span class="header-title">PILIH LEVEL</span>
            <span style="width: 40px;"></span>
        </div>
        
        <div class="level-grid" id="level-grid"></div>
    </div>

    <!-- SHOP SCREEN -->
    <div class="screen" id="shop-screen">
        <div class="header">
            <button class="header-btn" onclick="game.showScreen('main-menu')">
                <svg viewBox="0 0 24 24">
                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                </svg>
            </button>
            <span class="header-title">TOKO</span>
            <span style="width: 40px;"></span>
        </div>
        
        <div class="balance-bar">
            <div class="stat-item">
                <svg viewBox="0 0 24 24" fill="#0080ff">
                    <path d="M12 2L1 21h22L12 2z"/>
                </svg>
                <span id="shop-diamonds">0</span>
            </div>
            <div class="stat-item">
                <svg viewBox="0 0 24 24" fill="#e50914">
                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                </svg>
                <span id="shop-lives">3</span><span>/5</span>
            </div>
        </div>
        
        <div class="shop-items">
            <div class="shop-item" id="shop-life-item">
                <div class="shop-item-info">
                    <svg viewBox="0 0 24 24" fill="#e50914">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                    <div>
                        <div class="shop-item-name">+1 Nyawa</div>
                        <div class="shop-item-desc">Tambah 1 nyawa</div>
                    </div>
                </div>
                <button class="btn btn-gold" onclick="game.buyLife()" id="buy-life-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                        <path d="M12 2L1 21h22L12 2z"/>
                    </svg>
                    30
                </button>
            </div>
            <div class="shop-item" id="shop-daily-item">
                <div class="shop-item-info">
                    <svg viewBox="0 0 24 24" fill="#ffd700">
                        <path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"/>
                    </svg>
                    <div>
                        <div class="shop-item-name">Daily Claim</div>
                        <div class="shop-item-desc">Klaim hadiah harian</div>
                    </div>
                </div>
                <button class="btn btn-green" onclick="game.showDailyClaim()" id="daily-claim-btn">GRATIS</button>
            </div>
        </div>
        
        <h3 class="shop-section-title">Avatar Biasa</h3>
        <div class="avatar-grid" id="normal-avatars"></div>
        
        <h3 class="shop-section-title">Avatar Premium</h3>
        <div class="avatar-grid" id="premium-avatars"></div>
    </div>

    <!-- PROFILE SCREEN -->
    <div class="screen scrollable" id="profile-screen">
        <div class="header">
            <button class="header-btn" onclick="game.showScreen('main-menu')">
                <svg viewBox="0 0 24 24">
                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                </svg>
            </button>
            <span class="header-title">PROFIL</span>
            <span style="width: 40px;"></span>
        </div>
        
        <div class="profile-card" id="profile-card" onclick="game.profileCardClick()">
            <div class="profile-avatar" id="profile-avatar-display">
                <svg viewBox="0 0 24 24">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
            </div>
            <div class="profile-name">
                <span id="profile-username">Player</span>
                <svg class="verified-badge" id="verified-badge" viewBox="0 0 24 24" fill="#0080ff" style="display: none;">
                    <circle cx="12" cy="12" r="10" fill="#0080ff"/>
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="white"/>
                </svg>
            </div>
        </div>
        
        <div class="stats-grid" id="stats-grid">
            <div class="stats-card">
                <svg viewBox="0 0 24 24">
                    <path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"/>
                </svg>
                <div class="stats-value" id="stat-games">0</div>
                <div class="stats-label">Total Games</div>
            </div>
            <div class="stats-card">
                <svg viewBox="0 0 24 24">
                    <path d="M12 2L1 21h22L12 2z"/>
                </svg>
                <div class="stats-value" id="stat-doors">0</div>
                <div class="stats-label">Pintu Dibuka</div>
            </div>
            <div class="stats-card">
                <svg viewBox="0 0 24 24">
                    <path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"/>
                </svg>
                <div class="stats-value" id="stat-deaths">0</div>
                <div class="stats-label">Total Mati</div>
            </div>
            <div class="stats-card">
                <svg viewBox="0 0 24 24">
                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.41-1.41L12 14.17l7.59-7.59L21 8l-9 9z"/>
                </svg>
                <div class="stats-value" id="stat-winrate">0%</div>
                <div class="stats-label">Win Rate</div>
            </div>
            <div class="stats-card">
                <svg viewBox="0 0 24 24" fill="#ffd700">
                    <path d="M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2z"/>
                </svg>
                <div class="stats-value" id="stat-level">1</div>
                <div class="stats-label">Level</div>
            </div>
            <div class="stats-card">
                <svg viewBox="0 0 24 24" fill="#0080ff">
                    <path d="M12 2L1 21h22L12 2z"/>
                </svg>
                <div class="stats-value" id="stat-diamond">0</div>
                <div class="stats-label">Diamond</div>
            </div>
            <div class="stats-card">
                <svg viewBox="0 0 24 24" fill="#e50914">
                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                </svg>
                <div class="stats-value" id="stat-lives">3</div>
                <div class="stats-label">Nyawa</div>
            </div>
            <div class="stats-card">
                <svg viewBox="0 0 24 24">
                    <path d="M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2z"/>
                </svg>
                <div class="stats-value" id="stat-achievements">0/5</div>
                <div class="stats-label">Achievement</div>
            </div>
            <div class="stats-card">
                <svg viewBox="0 0 24 24" fill="#ffd700">
                    <path d="M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67z"/>
                </svg>
                <div class="stats-value" id="stat-streak">0</div>
                <div class="stats-label">Best Streak</div>
            </div>
            <div class="stats-card">
                <svg viewBox="0 0 24 24">
                    <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                </svg>
                <div class="stats-value" id="stat-time">0m</div>
                <div class="stats-label">Waktu Main</div>
            </div>
        </div>
    </div>

    <!-- ACHIEVEMENTS SCREEN -->
    <div class="screen" id="achievements-screen">
        <div class="header">
            <button class="header-btn" onclick="game.showScreen('main-menu')">
                <svg viewBox="0 0 24 24">
                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                </svg>
            </button>
            <span class="header-title">ACHIEVEMENT</span>
            <span style="width: 40px;"></span>
        </div>
        
        <div class="achievements-list" id="achievements-list"></div>
    </div>

    <!-- SETTINGS SCREEN -->
    <div class="screen" id="settings-screen">
        <div class="header">
            <button class="header-btn" onclick="game.showScreen('main-menu')">
                <svg viewBox="0 0 24 24">
                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                </svg>
            </button>
            <span class="header-title">PENGATURAN</span>
            <span style="width: 40px;"></span>
        </div>
        
        <div class="settings-list">
            <div class="setting-item">
                <div class="setting-label">
                    <svg viewBox="0 0 24 24">
                        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                    </svg>
                    <span>Efek Suara</span>
                </div>
                <div class="toggle-switch active" id="toggle-sound" onclick="game.toggleSetting('sound')"></div>
            </div>
            <div class="setting-item">
                <div class="setting-label">
                    <svg viewBox="0 0 24 24">
                        <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/>
                    </svg>
                    <span>Jumpscare</span>
                </div>
                <div class="toggle-switch active" id="toggle-jumpscare" onclick="game.toggleSetting('jumpscare')"></div>
            </div>
            <div class="setting-item">
                <div class="setting-label">
                    <svg viewBox="0 0 24 24">
                        <path d="M0 15.5c0 .55.45 1 1 1h9v-2H1c-.55 0-1 .45-1 1zm0-4c0 .55.45 1 1 1h9v-2H1c-.55 0-1 .45-1 1zm0-4c0 .55.45 1 1 1h9v-2H1c-.55 0-1 .45-1 1zm20 12V4c0-1.1-.9-2-2-2h-8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2zm-8-2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"/>
                    </svg>
                    <span>Getaran</span>
                </div>
                <div class="toggle-switch active" id="toggle-vibration" onclick="game.toggleSetting('vibration')"></div>
            </div>
        </div>
        
        <div class="danger-zone">
            <h3>
                <svg viewBox="0 0 24 24">
                    <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
                </svg>
                Zona Berbahaya
            </h3>
            <div class="danger-buttons">
                <button class="btn btn-danger" onclick="game.showLogoutConfirm()">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                        <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                    </svg>
                    LOGOUT
                </button>
                <button class="btn btn-danger" onclick="game.showResetConfirm()">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                    </svg>
                    RESET SEMUA PROGRESS
                </button>
            </div>
        </div>
    </div>

    <!-- ABOUT SCREEN -->
    <div class="screen scrollable" id="about-screen">
        <div class="header">
            <button class="header-btn" onclick="game.showScreen('main-menu')">
                <svg viewBox="0 0 24 24">
                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                </svg>
            </button>
            <span class="header-title">TENTANG</span>
            <span style="width: 40px;"></span>
        </div>
        
        <div class="about-content">
            <div class="about-header">
                <svg viewBox="0 0 100 100">
                    <rect x="20" y="10" width="60" height="85" rx="3" fill="none" stroke="currentColor" stroke-width="4"/>
                    <rect x="28" y="18" width="44" height="32" rx="2" fill="currentColor" opacity="0.3"/>
                    <rect x="28" y="55" width="44" height="32" rx="2" fill="currentColor" opacity="0.3"/>
                    <circle cx="70" cy="52" r="5" fill="currentColor"/>
                </svg>
                <h1>Door To Door</h1>
                <p class="version">v1.0.0</p>
            </div>
            
            <div class="about-section">
                <h3>Deskripsi</h3>
                <p>Door To Door adalah game horror survival yang menguji keberuntungan dan keberanian Anda. Di setiap level, Anda harus memilih pintu yang benar dari tiga pintu yang tersedia.</p>
                <p style="margin-top: 10px;">Pilih pintu yang salah, dan Anda akan menghadapi jumpscare yang mengerikan! Selesaikan 10 pintu per level untuk melanjutkan ke level berikutnya. Dengan total 16 level yang semakin sulit, apakah Anda bisa menjadi Door Master?</p>
                <p style="margin-top: 10px;">Game ini dirancang untuk memberikan pengalaman horror yang intens dengan efek visual dan audio yang memukau. Setiap keputusan yang Anda buat bisa menjadi yang terakhir!</p>
                <p style="margin-top: 10px;">Kumpulkan diamond, tingkatkan level, dan raih semua achievement untuk membuktikan bahwa Anda adalah pemain terbaik. Jangan lupa klaim daily reward setiap hari!</p>
            </div>
            
            <div class="about-section">
                <h3>Changelog v1.0.0</h3>
                <ul>
                    <li>Rilis awal Door To Door</li>
                    <li>16 level dengan tingkat kesulitan bertambah</li>
                    <li>Sistem jumpscare dengan 4 monster berbeda</li>
                    <li>6 efek visual intens</li>
                    <li>Sistem daily claim 7 hari</li>
                    <li>5 achievement untuk dikumpulkan</li>
                    <li>Sistem nyawa dan diamond</li>
                    <li>Ghost Mode untuk cheater sejati</li>
                    <li>PWA support untuk instalasi</li>
                    <li>Sound synthesizer menggunakan Web Audio API</li>
                </ul>
            </div>
            
            <div class="about-section">
                <h3>Special Thanks</h3>
                <ul>
                    <li>Semua player yang bermain Door To Door</li>
                    <li>Komunitas game horror Indonesia</li>
                    <li>Keluarga yang selalu mendukung</li>
                    <li>Kamu yang membaca ini</li>
                </ul>
            </div>
            
            <div class="about-section">
                <h3>Privacy Policy</h3>
                <p>Door To Door menyimpan semua data secara lokal di perangkat Anda menggunakan localStorage. Tidak ada data yang dikirim ke server manapun. Data Anda sepenuhnya milik Anda dan tersimpan di browser Anda.</p>
            </div>
            
            <div class="about-section">
                <h3>Syarat dan Ketentuan</h3>
                <p>Dengan memainkan game ini, Anda menyetujui bahwa:</p>
                <ul>
                    <li>Anda berusia minimal 13 tahun atau mendapat izin orang tua</li>
                    <li>Anda memahami bahwa game ini mengandung konten horror</li>
                    <li>Anda tidak memiliki kondisi kesehatan yang dapat dipicu oleh jumpscare</li>
                    <li>Developer tidak bertanggung jawab atas dampak psikologis dari bermain game ini</li>
                    <li>Anda bermain dengan risiko sendiri</li>
                </ul>
            </div>
            
            <div class="about-section">
                <h3>Developer</h3>
                <p>GenzX4K - Passionate game developer yang suka bikin game horror.</p>
            </div>
            
            <div class="social-links">
                <a href="https://t.me/Ns4ux" target="_blank" class="social-link">
                    <svg viewBox="0 0 24 24">
                        <path d="M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"/>
                    </svg>
                    @Ns4ux
                </a>
                <a href="https://youtube.com/@Gensnpi" target="_blank" class="social-link">
                    <svg viewBox="0 0 24 24">
                        <path d="M10 15l5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73z"/>
                    </svg>
                    @Gensnpi
                </a>
            </div>
            
            <p class="copyright">Copyright  2025 GenzX4K. All rights reserved.</p>
        </div>
    </div>

    <!-- MODALS -->
    
    <!-- Daily Claim Modal -->
    <div class="modal-overlay" id="modal-daily">
        <div class="modal">
            <div class="modal-header">
                <svg viewBox="0 0 24 24" fill="#ffd700" width="48" height="48">
                    <path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"/>
                </svg>
                <h2>Daily Claim</h2>
            </div>
            <div class="modal-body">
                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 16px;">Hari ke-<span id="daily-streak-num">1</span></p>
                <div class="daily-days" id="daily-days"></div>
                <p style="text-align: center; margin-top: 16px;">
                    <span style="color: var(--accent-green);">+3 Nyawa</span> & 
                    <span style="color: var(--accent-blue);">+<span id="daily-diamond-reward">5</span> Diamond</span>
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-gold" id="claim-daily-btn" onclick="game.claimDaily()">KLAIM</button>
                <button class="btn btn-secondary" onclick="game.closeModal('modal-daily')">TUTUP</button>
            </div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div class="modal-overlay" id="modal-gameover">
        <div class="modal">
            <div class="modal-header">
                <svg viewBox="0 0 24 24" fill="#e50914" width="64" height="64">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"/>
                </svg>
                <h2 style="color: var(--accent-red);">GAME OVER</h2>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p style="color: var(--text-secondary);">Nyawamu habis!</p>
                <p style="margin-top: 16px; font-size: 14px; color: var(--text-secondary);">
                    Nyawa akan reset pada: <span id="reset-countdown" style="color: var(--accent-gold);">00:00:00</span>
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-gold" onclick="game.continueGame()" id="continue-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                        <path d="M12 2L1 21h22L12 2z"/>
                    </svg>
                    10 - LANJUTKAN
                </button>
                <button class="btn btn-secondary" onclick="game.gameOverToMenu()">MENU UTAMA</button>
            </div>
        </div>
    </div>

    <!-- Level Complete Modal -->
    <div class="modal-overlay" id="modal-levelcomplete">
        <div class="modal">
            <div class="modal-header">
                <svg viewBox="0 0 24 24" fill="#46d369" width="64" height="64" style="animation: bounce 0.5s infinite;">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                <h2 style="color: var(--accent-green);">LEVEL SELESAI!</h2>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p style="font-size: 24px; color: var(--accent-gold);">+10 Diamond!</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-gold" onclick="game.nextLevel()" id="next-level-btn">LEVEL BERIKUTNYA</button>
                <button class="btn btn-secondary" onclick="game.levelCompleteToMenu()">MENU UTAMA</button>
            </div>
        </div>
    </div>

    <!-- Achievement Modal -->
    <div class="modal-overlay" id="modal-achievement">
        <div class="modal">
            <div class="modal-header">
                <svg viewBox="0 0 24 24" fill="#ffd700" width="64" height="64" style="animation: bounce 0.5s infinite;">
                    <path d="M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2z"/>
                </svg>
                <h2 style="color: var(--accent-gold);">ACHIEVEMENT!</h2>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p id="achievement-name" style="font-size: 18px; font-weight: 600;"></p>
                <p id="achievement-desc" style="color: var(--text-secondary); margin-top: 8px;"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-gold" onclick="game.closeModal('modal-achievement')">LUAR BIASA!</button>
            </div>
        </div>
    </div>

    <!-- Exit Confirm Modal -->
    <div class="modal-overlay" id="modal-exit">
        <div class="modal">
            <div class="modal-header">
                <svg viewBox="0 0 24 24" fill="#ffd700" width="48" height="48">
                    <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
                </svg>
                <h2>Keluar dari Game?</h2>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p style="color: var(--text-secondary);">Progress level saat ini akan hilang!</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="game.confirmExit()">YA, KELUAR</button>
                <button class="btn btn-secondary" onclick="game.closeModal('modal-exit')">BATAL</button>
            </div>
        </div>
    </div>

    <!-- Reset Confirm Modal -->
    <div class="modal-overlay" id="modal-reset">
        <div class="modal">
            <div class="modal-header">
                <svg viewBox="0 0 24 24" fill="#e50914" width="48" height="48">
                    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                </svg>
                <h2 style="color: var(--accent-red);">Reset Semua Progress?</h2>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p style="color: var(--accent-red);">Tidak dapat dibatalkan!</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="game.confirmReset()">YA, RESET</button>
                <button class="btn btn-secondary" onclick="game.closeModal('modal-reset')">BATAL</button>
            </div>
        </div>
    </div>

    <!-- How To Play Modal -->
    <div class="modal-overlay" id="modal-howtoplay">
        <div class="modal">
            <div class="modal-header">
                <svg viewBox="0 0 24 24" fill="#0080ff" width="48" height="48">
                    <path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/>
                </svg>
                <h2>Cara Bermain</h2>
            </div>
            <div class="modal-body">
                <div class="how-to-section">
                    <h4>Tujuan</h4>
                    <p>Pilih pintu yang benar dari 3 pintu yang tersedia. Selesaikan 10 pintu untuk menyelesaikan 1 level.</p>
                </div>
                <div class="how-to-section">
                    <h4>Mekanisme</h4>
                    <p>Setiap pintu memiliki 1/3 kemungkinan benar. Pilih salah = jumpscare + kehilangan nyawa + kembali ke pintu 1.</p>
                </div>
                <div class="how-to-section">
                    <h4>Level</h4>
                    <p>Ada 16 level. Waktu semakin berkurang setiap level (40s  2.5s).</p>
                </div>
                <div class="how-to-section">
                    <h4>Nyawa</h4>
                    <p>Maksimal 5 nyawa. Reset ke 3 setiap jam 00:00. Setiap 5 streak = +1 nyawa.</p>
                </div>
                <div class="how-to-section">
                    <h4>Diamond</h4>
                    <p>Didapat dari menyelesaikan level (+10) dan daily claim. Bisa untuk beli nyawa atau continue.</p>
                </div>
                <div class="how-to-section">
                    <h4>Daily Claim</h4>
                    <p>Klaim setiap hari untuk mendapat nyawa dan diamond. 7 hari berturut-turut = bonus maksimal!</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="game.closeModal('modal-howtoplay')">MENGERTI</button>
            </div>
        </div>
    </div>

    <!-- Cheat Menu Modal -->
    <div class="modal-overlay" id="modal-cheat">
        <div class="modal">
            <div class="modal-header">
                <svg viewBox="0 0 24 24" fill="#ffd700" width="48" height="48">
                    <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
                </svg>
                <h2>Cheat Menu</h2>
            </div>
            <div class="modal-body">
                <div id="cheat-password-section">
                    <div class="input-group">
                        <label>Password</label>
                        <div class="input-wrapper">
                            <input type="password" id="cheat-password" placeholder="Masukkan password">
                        </div>
                    </div>
                    <button class="btn btn-gold" style="width: 100%;" onclick="game.unlockCheat()">UNLOCK</button>
                </div>
                <div class="cheat-controls" id="cheat-controls">
                    <div class="cheat-row">
                        <span class="cheat-label">Diamond</span>
                        <div class="cheat-buttons">
                            <button class="cheat-btn" onclick="game.cheatDiamond(-10)">-</button>
                            <span class="cheat-value" id="cheat-diamond">0</span>
                            <button class="cheat-btn" onclick="game.cheatDiamond(10)">+</button>
                        </div>
                    </div>
                    <div class="cheat-row">
                        <span class="cheat-label">Nyawa</span>
                        <div class="cheat-buttons">
                            <button class="cheat-btn" onclick="game.cheatLife(-1)">-</button>
                            <span class="cheat-value" id="cheat-life">3</span>
                            <button class="cheat-btn" onclick="game.cheatLife(1)">+</button>
                        </div>
                    </div>
                    <div class="cheat-row">
                        <span class="cheat-label">Level</span>
                        <div class="cheat-buttons">
                            <button class="cheat-btn" onclick="game.cheatLevel(-1)">-</button>
                            <span class="cheat-value" id="cheat-level">1</span>
                            <button class="cheat-btn" onclick="game.cheatLevel(1)">+</button>
                        </div>
                    </div>
                    <div class="cheat-row">
                        <span class="cheat-label">Ghost Mode</span>
                        <div class="toggle-switch" id="toggle-ghost" onclick="game.toggleGhostMode()"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="game.closeModal('modal-cheat')">TUTUP</button>
            </div>
        </div>
    </div>

    <!-- Debug Accounts Modal -->
    <div class="modal-overlay" id="modal-debug">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <svg viewBox="0 0 24 24" fill="#0080ff" width="48" height="48">
                    <path d="M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z"/>
                </svg>
                <h2>Debug: Semua Akun</h2>
            </div>
            <div class="modal-body">
                <div class="debug-accounts" id="debug-accounts"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="game.closeModal('modal-debug')">TUTUP</button>
            </div>
        </div>
    </div>

    <!-- Logout Confirm Modal -->
    <div class="modal-overlay" id="modal-logout">
        <div class="modal">
            <div class="modal-header">
                <svg viewBox="0 0 24 24" fill="#ffd700" width="48" height="48">
                    <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                </svg>
                <h2>Logout?</h2>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p style="color: var(--text-secondary);">Anda akan keluar dari akun ini</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="game.confirmLogout()">YA, LOGOUT</button>
                <button class="btn btn-secondary" onclick="game.closeModal('modal-logout')">BATAL</button>
            </div>
        </div>
    </div>

    <script>
        // ==================== PWA SETUP ====================
        const pwaManifest = {
            name: "Door To Door",
            short_name: "D2D",
            description: "Horror Survival Game",
            start_url: "./",
            display: "standalone",
            background_color: "#0a0a0a",
            theme_color: "#0a0a0a",
            icons: [
                {
                    src: "data:image/svg+xml," + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><rect fill="#0a0a0a" width="192" height="192"/><text x="96" y="120" font-size="80" fill="#e50914" text-anchor="middle" font-family="Arial" font-weight="bold">D2D</text></svg>'),
                    sizes: "192x192",
                    type: "image/svg+xml"
                },
                {
                    src: "data:image/svg+xml," + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><rect fill="#0a0a0a" width="512" height="512"/><text x="256" y="320" font-size="200" fill="#e50914" text-anchor="middle" font-family="Arial" font-weight="bold">D2D</text></svg>'),
                    sizes: "512x512",
                    type: "image/svg+xml"
                }
            ]
        };

        const manifestBlob = new Blob([JSON.stringify(pwaManifest)], { type: 'application/json' });
        const manifestURL = URL.createObjectURL(manifestBlob);
        const manifestLink = document.createElement('link');
        manifestLink.rel = 'manifest';
        manifestLink.href = manifestURL;
        document.head.appendChild(manifestLink);

        // Service Worker
        const swCode = `
            const CACHE_NAME = 'd2d-cache-v1';
            self.addEventListener('install', (e) => {
                self.skipWaiting();
            });
            self.addEventListener('activate', (e) => {
                e.waitUntil(clients.claim());
            });
            self.addEventListener('fetch', (e) => {
                e.respondWith(
                    caches.match(e.request).then(r => r || fetch(e.request))
                );
            });
        `;
        const swBlob = new Blob([swCode], { type: 'application/javascript' });
        const swURL = URL.createObjectURL(swBlob);
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register(swURL).catch(() => {});
        }

        // ==================== SOUND SYSTEM ====================
        class SoundSystem {
            constructor() {
                this.ctx = null;
                this.enabled = true;
            }

            init() {
                if (!this.ctx) {
                    this.ctx = new (window.AudioContext || window.webkitAudioContext)();
                }
                if (this.ctx.state === 'suspended') {
                    this.ctx.resume();
                }
            }

            play(type) {
                if (!this.enabled) return;
                this.init();
                
                switch(type) {
                    case 'CLICK': this.playClick(); break;
                    case 'DOOR_CREAK': this.playDoorCreak(); break;
                    case 'SUCCESS': this.playSuccess(); break;
                    case 'JUMPSCARE': this.playJumpscare(); break;
                    case 'TIMER_TICK': this.playTimerTick(); break;
                    case 'ACHIEVEMENT': this.playAchievement(); break;
                    case 'LEVEL_COMPLETE': this.playLevelComplete(); break;
                    case 'PURCHASE': this.playPurchase(); break;
                    case 'DAILY_CLAIM': this.playDailyClaim(); break;
                    case 'GAME_OVER': this.playGameOver(); break;
                    case 'ERROR': this.playError(); break;
                }
            }

            playClick() {
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.connect(gain);
                gain.connect(this.ctx.destination);
                osc.frequency.value = 800;
                osc.type = 'sine';
                gain.gain.setValueAtTime(0.3, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.1);
                osc.start();
                osc.stop(this.ctx.currentTime + 0.1);
            }

            playDoorCreak() {
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.connect(gain);
                gain.connect(this.ctx.destination);
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(80, this.ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(200, this.ctx.currentTime + 0.5);
                gain.gain.setValueAtTime(0.2, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.5);
                osc.start();
                osc.stop(this.ctx.currentTime + 0.5);
            }

            playSuccess() {
                const notes = [523, 659, 784];
                notes.forEach((freq, i) => {
                    const osc = this.ctx.createOscillator();
                    const gain = this.ctx.createGain();
                    osc.connect(gain);
                    gain.connect(this.ctx.destination);
                    osc.frequency.value = freq;
                    osc.type = 'sine';
                    gain.gain.setValueAtTime(0.3, this.ctx.currentTime + i * 0.1);
                    gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + i * 0.1 + 0.2);
                    osc.start(this.ctx.currentTime + i * 0.1);
                    osc.stop(this.ctx.currentTime + i * 0.1 + 0.2);
                });
            }

            playJumpscare() {
                // Noise burst
                const bufferSize = this.ctx.sampleRate * 0.5;
                const buffer = this.ctx.createBuffer(1, bufferSize, this.ctx.sampleRate);
                const data = buffer.getChannelData(0);
                for (let i = 0; i < bufferSize; i++) {
                    data[i] = (Math.random() * 2 - 1) * 0.8;
                }
                const noise = this.ctx.createBufferSource();
                noise.buffer = buffer;
                
                const noiseGain = this.ctx.createGain();
                noiseGain.gain.setValueAtTime(1, this.ctx.currentTime);
                noiseGain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.5);
                
                const distortion = this.ctx.createWaveShaper();
                const curve = new Float32Array(256);
                for (let i = 0; i < 256; i++) {
                    const x = (i - 128) / 128;
                    curve[i] = Math.tanh(x * 5);
                }
                distortion.curve = curve;
                
                noise.connect(distortion);
                distortion.connect(noiseGain);
                noiseGain.connect(this.ctx.destination);
                noise.start();
                noise.stop(this.ctx.currentTime + 0.5);

                // Low rumble
                const lowOsc = this.ctx.createOscillator();
                const lowGain = this.ctx.createGain();
                lowOsc.type = 'sawtooth';
                lowOsc.frequency.setValueAtTime(40, this.ctx.currentTime);
                lowOsc.frequency.linearRampToValueAtTime(80, this.ctx.currentTime + 1);
                lowGain.gain.setValueAtTime(0.8, this.ctx.currentTime);
                lowGain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 1);
                lowOsc.connect(lowGain);
                lowGain.connect(this.ctx.destination);
                lowOsc.start();
                lowOsc.stop(this.ctx.currentTime + 1);

                // High scream
                const highOsc = this.ctx.createOscillator();
                const highGain = this.ctx.createGain();
                highOsc.type = 'sawtooth';
                highOsc.frequency.setValueAtTime(600, this.ctx.currentTime);
                highOsc.frequency.exponentialRampToValueAtTime(2500, this.ctx.currentTime + 0.3);
                highGain.gain.setValueAtTime(0.6, this.ctx.currentTime);
                highGain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.5);
                highOsc.connect(highGain);
                highGain.connect(this.ctx.destination);
                highOsc.start();
                highOsc.stop(this.ctx.currentTime + 0.5);

                // Mid screech
                const midOsc = this.ctx.createOscillator();
                const midGain = this.ctx.createGain();
                midOsc.type = 'square';
                midOsc.frequency.setValueAtTime(400, this.ctx.currentTime);
                midOsc.frequency.exponentialRampToValueAtTime(1800, this.ctx.currentTime + 0.4);
                midGain.gain.setValueAtTime(0.5, this.ctx.currentTime);
                midGain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.6);
                midOsc.connect(midGain);
                midGain.connect(this.ctx.destination);
                midOsc.start();
                midOsc.stop(this.ctx.currentTime + 0.6);
            }

            playTimerTick() {
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.connect(gain);
                gain.connect(this.ctx.destination);
                osc.frequency.value = 1000;
                osc.type = 'square';
                gain.gain.setValueAtTime(0.1, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.05);
                osc.start();
                osc.stop(this.ctx.currentTime + 0.05);
            }

            playAchievement() {
                const notes = [523, 659, 784, 1047];
                notes.forEach((freq, i) => {
                    const osc = this.ctx.createOscillator();
                    const gain = this.ctx.createGain();
                    osc.connect(gain);
                    gain.connect(this.ctx.destination);
                    osc.frequency.value = freq;
                    osc.type = 'sine';
                    gain.gain.setValueAtTime(0.3, this.ctx.currentTime + i * 0.15);
                    gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + i * 0.15 + 0.3);
                    osc.start(this.ctx.currentTime + i * 0.15);
                    osc.stop(this.ctx.currentTime + i * 0.15 + 0.3);
                });
            }

            playLevelComplete() {
                const notes = [392, 523, 659, 784, 1047];
                notes.forEach((freq, i) => {
                    const osc = this.ctx.createOscillator();
                    const gain = this.ctx.createGain();
                    osc.connect(gain);
                    gain.connect(this.ctx.destination);
                    osc.frequency.value = freq;
                    osc.type = 'sine';
                    gain.gain.setValueAtTime(0.3, this.ctx.currentTime + i * 0.12);
                    gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + i * 0.12 + 0.25);
                    osc.start(this.ctx.currentTime + i * 0.12);
                    osc.stop(this.ctx.currentTime + i * 0.12 + 0.25);
                });
            }

            playPurchase() {
                const notes = [800, 1000, 1200];
                notes.forEach((freq, i) => {
                    const osc = this.ctx.createOscillator();
                    const gain = this.ctx.createGain();
                    osc.connect(gain);
                    gain.connect(this.ctx.destination);
                    osc.frequency.value = freq;
                    osc.type = 'sine';
                    gain.gain.setValueAtTime(0.2, this.ctx.currentTime + i * 0.08);
                    gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + i * 0.08 + 0.15);
                    osc.start(this.ctx.currentTime + i * 0.08);
                    osc.stop(this.ctx.currentTime + i * 0.08 + 0.15);
                });
            }

            playDailyClaim() {
                const notes = [600, 800, 1000, 1200, 1400];
                notes.forEach((freq, i) => {
                    const osc = this.ctx.createOscillator();
                    const gain = this.ctx.createGain();
                    osc.connect(gain);
                    gain.connect(this.ctx.destination);
                    osc.frequency.value = freq;
                    osc.type = 'sine';
                    gain.gain.setValueAtTime(0.2, this.ctx.currentTime + i * 0.06);
                    gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + i * 0.06 + 0.2);
                    osc.start(this.ctx.currentTime + i * 0.06);
                    osc.stop(this.ctx.currentTime + i * 0.06 + 0.2);
                });
            }

            playGameOver() {
                const notes = [300, 250, 200, 150];
                notes.forEach((freq, i) => {
                    const osc = this.ctx.createOscillator();
                    const gain = this.ctx.createGain();
                    osc.connect(gain);
                    gain.connect(this.ctx.destination);
                    osc.frequency.value = freq;
                    osc.type = 'sawtooth';
                    gain.gain.setValueAtTime(0.3, this.ctx.currentTime + i * 0.25);
                    gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + i * 0.25 + 0.4);
                    osc.start(this.ctx.currentTime + i * 0.25);
                    osc.stop(this.ctx.currentTime + i * 0.25 + 0.4);
                });
            }

            playError() {
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.connect(gain);
                gain.connect(this.ctx.destination);
                osc.frequency.setValueAtTime(300, this.ctx.currentTime);
                osc.frequency.linearRampToValueAtTime(200, this.ctx.currentTime + 0.2);
                osc.type = 'sawtooth';
                gain.gain.setValueAtTime(0.3, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.2);
                osc.start();
                osc.stop(this.ctx.currentTime + 0.2);
            }
        }

        const sound = new SoundSystem();

        // ==================== MONSTER FACES SVG ====================
        const monsterFaces = [
            // Face 1 - Big Red Eyes
            `<circle cx="30" cy="40" r="15" fill="#ff0000"/>
             <circle cx="70" cy="40" r="15" fill="#ff0000"/>
             <circle cx="30" cy="40" r="8" fill="#000"/>
             <circle cx="70" cy="40" r="8" fill="#000"/>
             <path d="M25 70 Q50 90 75 70" stroke="#ff0000" stroke-width="5" fill="none"/>
             <line x1="20" y1="25" x2="40" y2="30" stroke="#ff0000" stroke-width="3"/>
             <line x1="80" y1="25" x2="60" y2="30" stroke="#ff0000" stroke-width="3"/>`,
            
            // Face 2 - Skull
            `<ellipse cx="50" cy="45" rx="35" ry="40" fill="#fff" opacity="0.9"/>
             <circle cx="35" cy="40" r="10" fill="#000"/>
             <circle cx="65" cy="40" r="10" fill="#000"/>
             <path d="M40 60 L45 70 L50 60 L55 70 L60 60" stroke="#000" stroke-width="3" fill="none"/>
             <ellipse cx="50" cy="55" rx="5" ry="8" fill="#000"/>`,
            
            // Face 3 - Demon
            `<path d="M20 20 L35 50 L20 80" stroke="#ff0000" stroke-width="4" fill="none"/>
             <path d="M80 20 L65 50 L80 80" stroke="#ff0000" stroke-width="4" fill="none"/>
             <circle cx="35" cy="45" r="12" fill="#ffff00"/>
             <circle cx="65" cy="45" r="12" fill="#ffff00"/>
             <circle cx="35" cy="45" r="6" fill="#000"/>
             <circle cx="65" cy="45" r="6" fill="#000"/>
             <path d="M30 70 Q50 85 70 70" stroke="#ff0000" stroke-width="4" fill="#800000"/>
             <path d="M35 75 L40 68 L45 75 L50 68 L55 75 L60 68 L65 75" fill="#fff"/>`,
            
            // Face 4 - Silhouette
            `<circle cx="50" cy="50" r="45" fill="#000" stroke="#ff0000" stroke-width="2"/>
             <circle cx="35" cy="40" r="5" fill="#ff0000"/>
             <circle cx="65" cy="40" r="5" fill="#ff0000"/>
             <path d="M35 65 Q50 75 65 65" stroke="#ff0000" stroke-width="3" fill="none"/>`
        ];

        // ==================== ACHIEVEMENTS DATA ====================
        const achievementsData = [
            { id: 'no_death', name: 'Still On Progress Dawg?', desc: 'Selesaikan 1 level tanpa mati' },
            { id: 'streak_5', name: 'Lucky Bastard', desc: '5 streak berturut-turut' },
            { id: 'survivor', name: 'Survivor', desc: 'Selesaikan level dengan 1 nyawa' },
            { id: 'diamond_100', name: 'Diamond Hoarder', desc: 'Kumpulkan 100 diamond' },
            { id: 'door_master', name: 'Door Master', desc: 'Selesaikan semua 16 level' }
        ];

        // ==================== DAILY REWARDS ====================
        const dailyRewards = [5, 7, 10, 12, 15, 20, 50];

        // ==================== SECURITY QUESTIONS ====================
        const securityQuestions = {
            pet: 'Nama hewan peliharaan pertama?',
            city: 'Kota kelahiran Anda?',
            school: 'Nama sekolah dasar Anda?',
            food: 'Makanan favorit Anda?',
            friend: 'Nama sahabat masa kecil?'
        };

        // ==================== AVATAR SVGs ====================
        const normalAvatars = [
            `<circle cx="12" cy="8" r="5" fill="#666"/><path d="M12 14c-4 0-7 2-7 4v2h14v-2c0-2-3-4-7-4z" fill="#666"/>`,
            `<rect x="6" y="6" width="12" height="12" rx="2" fill="#888"/><circle cx="9" cy="11" r="1.5" fill="#fff"/><circle cx="15" cy="11" r="1.5" fill="#fff"/>`,
            `<polygon points="12,4 20,20 4,20" fill="#e50914"/>`,
            `<circle cx="12" cy="12" r="8" fill="none" stroke="#46d369" stroke-width="2"/><path d="M8 12l3 3 5-6" fill="none" stroke="#46d369" stroke-width="2"/>`,
            `<rect x="4" y="8" width="16" height="10" rx="2" fill="#0080ff"/><circle cx="8" cy="13" r="2" fill="#fff"/><circle cx="16" cy="13" r="2" fill="#fff"/>`
        ];

        const premiumAvatars = [
            `<defs><linearGradient id="g1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#ffd700"/><stop offset="100%" style="stop-color:#ff8c00"/></linearGradient></defs><circle cx="12" cy="12" r="10" fill="url(#g1)"/><path d="M12 6l2 4 4.5.5-3.3 3 .8 4.5-4-2.2-4 2.2.8-4.5-3.3-3L10 10z" fill="#fff"/>`,
            `<defs><linearGradient id="g2" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#e50914"/><stop offset="100%" style="stop-color:#8b0000"/></linearGradient></defs><path d="M12 4l2.5 5 5.5.8-4 3.9.9 5.3-4.9-2.6-4.9 2.6.9-5.3-4-3.9 5.5-.8z" fill="url(#g2)"/>`,
            `<defs><linearGradient id="g3" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#00ffff"/><stop offset="100%" style="stop-color:#0080ff"/></linearGradient></defs><polygon points="12,2 15,9 22,9 16,14 18,22 12,17 6,22 8,14 2,9 9,9" fill="url(#g3)"/>`,
            `<defs><linearGradient id="g4" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#ff00ff"/><stop offset="100%" style="stop-color:#8b008b"/></linearGradient></defs><circle cx="12" cy="12" r="10" fill="url(#g4)"/><circle cx="12" cy="12" r="6" fill="#fff" opacity="0.3"/>`,
            `<defs><linearGradient id="g5" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#ffd700"/"/><stop offset="50%" style="stop-color:#fff"/><stop offset="100%" style="stop-color:#ffd700"/></linearGradient></defs><path d="M12 2l3 6 6 1-4.5 4 1 6-5.5-3-5.5 3 1-6L2 9l6-1z" fill="url(#g5)"/><circle cx="12" cy="12" r="3" fill="#ffd700"/>`
        ];

        // ==================== MAIN GAME CLASS ====================
        class Game {
            constructor() {
                this.currentUser = null;
                this.accounts = {};
                this.gameData = null;
                this.timerInterval = null;
                this.timeLeft = 0;
                this.maxTime = 40;
                this.correctDoor = 1;
                this.lastDoor = 1;
                this.ghostMode = false;
                this.avatarClickCount = 0;
                this.logoClickCount = 0;
                this.profileClickCount = 0;
                this.playStartTime = null;
                this.resetCountdownInterval = null;
                
                this.loadData();
                this.initMidnightCheck();
            }

            // ==================== DATA MANAGEMENT ====================
            loadData() {
                const accounts = localStorage.getItem('d2dAccounts');
                const currentUser = localStorage.getItem('d2dCurrentUser');
                
                if (accounts) {
                    this.accounts = JSON.parse(accounts);
                }
                
                if (currentUser && this.accounts[currentUser]) {
                    this.currentUser = currentUser;
                    this.gameData = this.accounts[currentUser].gameData;
                }
            }

            saveData() {
                if (this.currentUser && this.gameData) {
                    this.accounts[this.currentUser].gameData = this.gameData;
                }
                localStorage.setItem('d2dAccounts', JSON.stringify(this.accounts));
                localStorage.setItem('d2dCurrentUser', this.currentUser || '');
            }

            createDefaultGameData() {
                return {
                    lives: 3,
                    maxLives: 5,
                    diamonds: 0,
                    currentLevel: 1,
                    currentDoor: 1,
                    streak: 0,
                    highestStreak: 0,
                    unlockedLevels: [1],
                    completedLevels: [],
                    achievements: [],
                    stats: {
                        gamesPlayed: 0,
                        doorsOpened: 0,
                        deaths: 0,
                        correctDoors: 0,
                        playTimeMinutes: 0
                    },
                    dailyStreak: 1,
                    lastClaimDate: null,
                    settings: {
                        sound: true,
                        jumpscare: true,
                        vibration: true
                    },
                    levelDeathCount: 0,
                    verified: false,
                    selectedAvatar: 0
                };
            }

            // ==================== NAVIGATION ====================
            showScreen(screenId) {
                document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
                document.getElementById(screenId).classList.add('active');
                sound.play('CLICK');
                
                if (screenId === 'main-menu') {
                    this.updateMainMenu();
                } else if (screenId === 'level-screen') {
                    this.renderLevelGrid();
                } else if (screenId === 'shop-screen') {
                    this.updateShop();
                } else if (screenId === 'profile-screen') {
                    this.updateProfile();
                } else if (screenId === 'achievements-screen') {
                    this.renderAchievements();
                } else if (screenId === 'settings-screen') {
                    this.updateSettings();
                }
            }

            goToAuth() {
                sound.play('CLICK');
                this.showScreen('auth-screen');
            }

            // ==================== AUTH SYSTEM ====================
            switchAuthTab(tab) {
                sound.play('CLICK');
                document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.auth-form > div').forEach(f => f.classList.remove('active'));
                
                if (tab === 'login') {
                    document.querySelectorAll('.auth-tab')[0].classList.add('active');
                    document.getElementById('login-form').classList.add('active');
                } else if (tab === 'register') {
                    document.querySelectorAll('.auth-tab')[1].classList.add('active');
                    document.getElementById('register-form').classList.add('active');
                }
            }

            showForgotPassword() {
                sound.play('CLICK');
                document.querySelectorAll('.auth-form > div').forEach(f => f.classList.remove('active'));
                document.getElementById('forgot-form').classList.add('active');
                document.getElementById('forgot-step-1').style.display = 'block';
                document.getElementById('forgot-step-2').style.display = 'none';
                document.getElementById('forgot-step-3').style.display = 'none';
            }

            togglePassword(inputId) {
                const input = document.getElementById(inputId);
                input.type = input.type === 'password' ? 'text' : 'password';
            }

            toggleSecuritySection() {
                const checkbox = document.getElementById('ultra-safe-mode');
                const section = document.getElementById('security-section');
                section.classList.toggle('active', checkbox.checked);
            }

            login() {
                const username = document.getElementById('login-username').value.trim();
                const password = document.getElementById('login-password').value;
                
                if (!username || !password) {
                    this.showToast('Masukkan username dan password!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                if (!this.accounts[username]) {
                    this.showToast('Akun tidak ditemukan!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                if (this.accounts[username].password !== password) {
                    this.showToast('Password salah!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                this.currentUser = username;
                this.gameData = this.accounts[username].gameData;
                this.saveData();
                
                sound.play('SUCCESS');
                this.showToast('Login berhasil!');
                this.startLoading();
            }

            register() {
                const username = document.getElementById('register-username').value.trim();
                const password = document.getElementById('register-password').value;
                const confirm = document.getElementById('register-confirm').value;
                const ultraSafe = document.getElementById('ultra-safe-mode').checked;
                
                if (!username || !password) {
                    this.showToast('Masukkan username dan password!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                if (username.length < 3) {
                    this.showToast('Username minimal 3 karakter!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                if (password.length < 4) {
                    this.showToast('Password minimal 4 karakter!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                if (password !== confirm) {
                    this.showToast('Password tidak cocok!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                if (this.accounts[username]) {
                    this.showToast('Username sudah digunakan!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                let securityQuestion = null;
                let securityAnswer = null;
                
                if (ultraSafe) {
                    securityQuestion = document.getElementById('security-question').value;
                    securityAnswer = document.getElementById('security-answer').value.trim().toLowerCase();
                    
                    if (!securityQuestion || !securityAnswer) {
                        this.showToast('Lengkapi pertanyaan keamanan!', 'error');
                        sound.play('ERROR');
                        return;
                    }
                }
                
                this.accounts[username] = {
                    username: username,
                    password: password,
                    securityQuestion: securityQuestion,
                    securityAnswer: securityAnswer,
                    createdAt: new Date().toISOString(),
                    gameData: this.createDefaultGameData()
                };
                
                this.currentUser = username;
                this.gameData = this.accounts[username].gameData;
                this.saveData();
                
                sound.play('SUCCESS');
                this.showToast('Registrasi berhasil!');
                this.startLoading();
            }

            checkForgotUsername() {
                const username = document.getElementById('forgot-username').value.trim();
                
                if (!this.accounts[username]) {
                    this.showToast('Akun tidak ditemukan!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                if (!this.accounts[username].securityQuestion) {
                    this.showToast('Akun tidak memiliki pertanyaan keamanan!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                document.getElementById('forgot-step-1').style.display = 'none';
                document.getElementById('forgot-step-2').style.display = 'block';
                document.getElementById('forgot-question-text').textContent = 
                    securityQuestions[this.accounts[username].securityQuestion];
                
                sound.play('CLICK');
            }

            verifySecurityAnswer() {
                const username = document.getElementById('forgot-username').value.trim();
                const answer = document.getElementById('forgot-answer').value.trim().toLowerCase();
                
                if (answer !== this.accounts[username].securityAnswer) {
                    this.showToast('Jawaban salah!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                document.getElementById('forgot-step-2').style.display = 'none';
                document.getElementById('forgot-step-3').style.display = 'block';
                sound.play('SUCCESS');
            }

            resetPassword() {
                const username = document.getElementById('forgot-username').value.trim();
                const newPassword = document.getElementById('forgot-new-password').value;
                
                if (newPassword.length < 4) {
                    this.showToast('Password minimal 4 karakter!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                this.accounts[username].password = newPassword;
                this.saveData();
                
                sound.play('SUCCESS');
                this.showToast('Password berhasil direset!');
                this.switchAuthTab('login');
            }

            forceLogin(username) {
                this.currentUser = username;
                this.gameData = this.accounts[username].gameData;
                this.saveData();
                this.closeModal('modal-debug');
                sound.play('SUCCESS');
                this.showToast('Login sebagai ' + username);
                this.startLoading();
            }

            // ==================== LOADING SCREEN ====================
            startLoading() {
                this.showScreen('loading-screen');
                const progressFill = document.getElementById('loading-progress');
                const loadingText = document.getElementById('loading-text');
                const texts = [
                    'Mempersiapkan pintu...',
                    'Memanggil hantu...',
                    'Mengacak jumpscare...',
                    'Siap menakutimu...',
                    'Selamat datang!'
                ];
                
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 2;
                    progressFill.style.width = progress + '%';
                    
                    const textIndex = Math.floor(progress / 20);
                    loadingText.textContent = texts[Math.min(textIndex, texts.length - 1)];
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        setTimeout(() => {
                            this.showScreen('main-menu');
                            this.checkDailyClaim();
                        }, 300);
                    }
                }, 35);
            }

            // ==================== MAIN MENU ====================
            updateMainMenu() {
                this.updateLivesIndicator();
                document.getElementById('menu-diamonds').textContent = this.gameData.diamonds;
                document.getElementById('menu-level').textContent = this.gameData.currentLevel;
                this.updateResetCountdown();
            }

            updateLivesIndicator() {
                const container = document.getElementById('lives-indicator');
                let html = '';
                for (let i = 0; i < this.gameData.maxLives; i++) {
                    const filled = i < this.gameData.lives;
                    html += `<svg viewBox="0 0 24 24" fill="${filled ? '#e50914' : '#333'}">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>`;
                }
                container.innerHTML = html;
            }

            updateResetCountdown() {
                const countdownText = document.getElementById('countdown-text');
                
                if (this.gameData.lives >= 3) {
                    countdownText.textContent = '';
                    return;
                }
                
                if (this.resetCountdownInterval) {
                    clearInterval(this.resetCountdownInterval);
                }
                
                const updateCountdown = () => {
                    const now = new Date();
                    const midnight = new Date(now);
                    midnight.setHours(24, 0, 0, 0);
                    const diff = midnight - now;
                    
                    const hours = Math.floor(diff / 3600000);
                    const minutes = Math.floor((diff % 3600000) / 60000);
                    const seconds = Math.floor((diff % 60000) / 1000);
                    
                    countdownText.textContent = `Nyawa reset dalam: ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                };
                
                updateCountdown();
                this.resetCountdownInterval = setInterval(updateCountdown, 1000);
            }

            toggleHamburger() {
                sound.play('CLICK');
                document.getElementById('hamburger-menu').classList.toggle('active');
                document.getElementById('hamburger-overlay').classList.toggle('active');
            }

            // ==================== GAMEPLAY ====================
            startGame() {
                sound.play('CLICK');
                this.gameData.stats.gamesPlayed++;
                this.gameData.currentDoor = 1;
                this.gameData.levelDeathCount = 0;
                this.playStartTime = Date.now();
                this.saveData();
                
                this.showScreen('gameplay-screen');
                this.initGameplay();
            }

            startLevel(level) {
                if (!this.gameData.unlockedLevels.includes(level)) {
                    this.showToast('Level terkunci!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                sound.play('CLICK');
                this.gameData.currentLevel = level;
                this.gameData.currentDoor = 1;
                this.gameData.levelDeathCount = 0;
                this.gameData.stats.gamesPlayed++;
                this.playStartTime = Date.now();
                this.saveData();
                
                this.showScreen('gameplay-screen');
                this.initGameplay();
            }

            initGameplay() {
                this.updateGameHeader();
                this.randomizeDoor();
                this.startTimer();
                this.updateStreak();
                this.applyGhostMode();
            }

            updateGameHeader() {
                document.getElementById('game-lives').textContent = this.gameData.lives;
                document.getElementById('game-diamonds').textContent = this.gameData.diamonds;
                document.getElementById('game-level-text').textContent = 
                    `Level ${this.gameData.currentLevel} (Pintu ${this.gameData.currentDoor}/10)`;
            }

            randomizeDoor() {
                this.correctDoor = Math.floor(Math.random() * 3) + 1;
                
                // Reset door animations
                document.querySelectorAll('.door').forEach(d => {
                    d.classList.remove('opening', 'ghost-glow');
                });
                
                this.applyGhostMode();
            }

            applyGhostMode() {
                document.querySelectorAll('.door').forEach((d, i) => {
                    d.classList.remove('ghost-glow');
                });
                
                if (this.ghostMode) {
                    document.querySelector(`.door-${this.correctDoor}`).classList.add('ghost-glow');
                }
            }

            startTimer() {
                if (this.timerInterval) {
                    clearInterval(this.timerInterval);
                }
                
                this.maxTime = Math.max(40 - (this.gameData.currentLevel - 1) * 2.5, 2.5);
                this.timeLeft = this.maxTime;
                
                this.updateTimerDisplay();
                
                this.timerInterval = setInterval(() => {
                    this.timeLeft -= 0.1;
                    this.updateTimerDisplay();
                    
                    if (this.timeLeft <= 5 && this.timeLeft > 0) {
                        sound.play('TIMER_TICK');
                    }
                    
                    if (this.timeLeft <= 0) {
                        this.timerExpired();
                    }
                }, 100);
            }

            updateTimerDisplay() {
                const fill = document.getElementById('timer-fill');
                const text = document.getElementById('timer-text');
                const percent = (this.timeLeft / this.maxTime) * 100;
                
                fill.style.width = percent + '%';
                text.textContent = this.timeLeft.toFixed(1) + 's';
                
                if (this.timeLeft <= 5) {
                    fill.classList.add('warning');
                } else {
                    fill.classList.remove('warning');
                }
            }

            timerExpired() {
                clearInterval(this.timerInterval);
                
                this.gameData.lives--;
                this.gameData.stats.deaths++;
                this.gameData.currentDoor = 1;
                this.gameData.streak = 0;
                this.saveData();
                
                this.showToast('Waktu habis!', 'error');
                
                if (this.gameData.lives <= 0) {
                    this.showGameOver();
                } else {
                    this.updateGameHeader();
                    this.updateStreak();
                    this.randomizeDoor();
                    this.startTimer();
                }
            }

            selectDoor(doorNum) {
                if (this.timerInterval === null) return;
                
                clearInterval(this.timerInterval);
                this.timerInterval = null;
                
                sound.play('DOOR_CREAK');
                
                const door = document.querySelector(`.door-${doorNum}`);
                door.classList.add('opening');
                
                setTimeout(() => {
                    if (doorNum === this.correctDoor) {
                        this.correctDoorSelected();
                    } else {
                        this.wrongDoorSelected();
                    }
                }, 500);
            }

            correctDoorSelected() {
                sound.play('SUCCESS');
                
                this.gameData.streak++;
                this.gameData.stats.correctDoors++;
                this.gameData.stats.doorsOpened++;
                
                if (this.gameData.streak > this.gameData.highestStreak) {
                    this.gameData.highestStreak = this.gameData.streak;
                }
                
                // Check streak bonus
                if (this.gameData.streak % 5 === 0 && this.gameData.lives < this.gameData.maxLives) {
                    this.gameData.lives++;
                    this.showToast('+1 Nyawa! (5 Streak Bonus)');
                    this.checkAchievement('streak_5');
                }
                
                this.showToast(`Pintu ${this.gameData.currentDoor}/10 `);
                
                this.lastDoor = this.gameData.currentDoor;
                this.gameData.currentDoor++;
                
                if (this.gameData.currentDoor > 10) {
                    this.levelComplete();
                } else {
                    this.saveData();
                    this.updateGameHeader();
                    this.updateStreak();
                    this.randomizeDoor();
                    this.startTimer();
                }
            }

            wrongDoorSelected() {
                this.lastDoor = this.gameData.currentDoor;
                
                this.gameData.lives--;
                this.gameData.stats.deaths++;
                this.gameData.stats.doorsOpened++;
                this.gameData.levelDeathCount++;
                this.gameData.streak = 0;
                this.gameData.currentDoor = 1;
                this.saveData();
                
                if (this.gameData.settings.jumpscare) {
                    this.triggerJumpscare();
                } else {
                    this.afterJumpscare();
                }
            }

            triggerJumpscare() {
                sound.play('JUMPSCARE');
                
                if (this.gameData.settings.vibration && navigator.vibrate) {
                    navigator.vibrate([200, 50, 200, 50, 300, 100, 200]);
                }
                
                const overlay = document.getElementById('jumpscare-overlay');
                const face = document.getElementById('jumpscare-face');
                const secondary = document.getElementById('secondary-face');
                
                // Random monster face
                const faceIndex = Math.floor(Math.random() * monsterFaces.length);
                face.innerHTML = monsterFaces[faceIndex];
                
                // Different secondary face
                const secondaryIndex = (faceIndex + 1) % monsterFaces.length;
                secondary.innerHTML = monsterFaces[secondaryIndex];
                
                overlay.classList.add('active');
                
                // Apply all effects simultaneously
                const effects = ['effect-shake', 'effect-glitch', 'effect-flicker', 'effect-zoom', 'effect-color', 'effect-invert'];
                let effectIndex = 0;
                
                const effectInterval = setInterval(() => {
                    overlay.className = 'jumpscare-overlay active ' + effects[effectIndex % effects.length];
                    effectIndex++;
                    
                    // Flash secondary face
                    secondary.classList.toggle('flash');
                }, 100);
                
                setTimeout(() => {
                    clearInterval(effectInterval);
                    overlay.classList.remove('active');
                    overlay.className = 'jumpscare-overlay';
                    secondary.classList.remove('flash');
                    this.afterJumpscare();
                }, 2000);
            }

            afterJumpscare() {
                if (this.gameData.lives <= 0) {
                    this.showGameOver();
                } else {
                    this.updateGameHeader();
                    this.updateStreak();
                    this.randomizeDoor();
                    this.startTimer();
                }
            }

            updateStreak() {
                document.getElementById('streak-count').textContent = this.gameData.streak;
            }

            levelComplete() {
                clearInterval(this.timerInterval);
                this.timerInterval = null;
                
                // Update play time
                if (this.playStartTime) {
                    const playedMinutes = Math.floor((Date.now() - this.playStartTime) / 60000);
                    this.gameData.stats.playTimeMinutes += playedMinutes;
                    this.playStartTime = null;
                }
                
                this.gameData.diamonds += 10;
                
                if (!this.gameData.completedLevels.includes(this.gameData.currentLevel)) {
                    this.gameData.completedLevels.push(this.gameData.currentLevel);
                }
                
                // Check achievements
                if (this.gameData.levelDeathCount === 0) {
                    this.checkAchievement('no_death');
                }
                
                if (this.gameData.lives === 1) {
                    this.checkAchievement('survivor');
                }
                
                if (this.gameData.diamonds >= 100) {
                    this.checkAchievement('diamond_100');
                }
                
                // Unlock next level
                const nextLevel = this.gameData.currentLevel + 1;
                if (nextLevel <= 16 && !this.gameData.unlockedLevels.includes(nextLevel)) {
                    this.gameData.unlockedLevels.push(nextLevel);
                }
                
                // Check Door Master
                if (this.gameData.completedLevels.length >= 16) {
                    this.checkAchievement('door_master');
                }
                
                this.saveData();
                
                sound.play('LEVEL_COMPLETE');
                
                // Update next level button
                const nextBtn = document.getElementById('next-level-btn');
                if (this.gameData.currentLevel >= 16) {
                    nextBtn.textContent = 'SELESAI!';
                    nextBtn.onclick = () => this.levelCompleteToMenu();
                } else {
                    nextBtn.textContent = 'LEVEL BERIKUTNYA';
                    nextBtn.onclick = () => this.nextLevel();
                }
                
                this.openModal('modal-levelcomplete');
            }

            nextLevel() {
                this.closeModal('modal-levelcomplete');
                this.gameData.currentLevel++;
                this.gameData.currentDoor = 1;
                this.gameData.levelDeathCount = 0;
                this.playStartTime = Date.now();
                this.saveData();
                
                this.initGameplay();
            }

            levelCompleteToMenu() {
                this.closeModal('modal-levelcomplete');
                this.showScreen('main-menu');
            }

            showGameOver() {
                clearInterval(this.timerInterval);
                this.timerInterval = null;
                
                // Update play time
                if (this.playStartTime) {
                    const playedMinutes = Math.floor((Date.now() - this.playStartTime) / 60000);
                    this.gameData.stats.playTimeMinutes += playedMinutes;
                    this.playStartTime = null;
                }
                
                sound.play('GAME_OVER');
                
                // Update continue button state
                const continueBtn = document.getElementById('continue-btn');
                if (this.gameData.diamonds >= 10) {
                    continueBtn.disabled = false;
                    continueBtn.style.opacity = '1';
                } else {
                    continueBtn.disabled = true;
                    continueBtn.style.opacity = '0.5';
                }
                
                // Start countdown
                this.startResetCountdownModal();
                
                this.openModal('modal-gameover');
            }

            startResetCountdownModal() {
                const countdownEl = document.getElementById('reset-countdown');
                
                const updateCountdown = () => {
                    const now = new Date();
                    const midnight = new Date(now);
                    midnight.setHours(24, 0, 0, 0);
                    const diff = midnight - now;
                    
                    const hours = Math.floor(diff / 3600000);
                    const minutes = Math.floor((diff % 3600000) / 60000);
                    const seconds = Math.floor((diff % 60000) / 1000);
                    
                    countdownEl.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                };
                
                updateCountdown();
                
                if (this.gameOverCountdown) {
                    clearInterval(this.gameOverCountdown);
                }
                this.gameOverCountdown = setInterval(updateCountdown, 1000);
            }

            continueGame() {
                if (this.gameData.diamonds < 10) {
                    this.showToast('Diamond tidak cukup!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                this.gameData.diamonds -= 10;
                this.gameData.lives = 1;
                this.gameData.currentDoor = this.lastDoor; // Continue from last door
                this.saveData();
                
                sound.play('PURCHASE');
                this.closeModal('modal-gameover');
                
                if (this.gameOverCountdown) {
                    clearInterval(this.gameOverCountdown);
                }
                
                this.playStartTime = Date.now();
                this.updateGameHeader();
                this.updateStreak();
                this.randomizeDoor();
                this.startTimer();
            }

            gameOverToMenu() {
                this.closeModal('modal-gameover');
                if (this.gameOverCountdown) {
                    clearInterval(this.gameOverCountdown);
                }
                this.showScreen('main-menu');
            }

            showExitConfirm() {
                sound.play('CLICK');
                this.openModal('modal-exit');
            }

            confirmExit() {
                clearInterval(this.timerInterval);
                this.timerInterval = null;
                
                // Update play time
                if (this.playStartTime) {
                    const playedMinutes = Math.floor((Date.now() - this.playStartTime) / 60000);
                    this.gameData.stats.playTimeMinutes += playedMinutes;
                    this.playStartTime = null;
                }
                
                this.saveData();
                this.closeModal('modal-exit');
                this.showScreen('main-menu');
            }

            // ==================== LEVEL SELECT ====================
            renderLevelGrid() {
                const grid = document.getElementById('level-grid');
                grid.innerHTML = '';
                
                for (let i = 1; i <= 16; i++) {
                    const isLocked = !this.gameData.unlockedLevels.includes(i);
                    const isCompleted = this.gameData.completedLevels.includes(i);
                    const isCurrent = this.gameData.currentLevel === i && !isCompleted;
                    const time = Math.max(40 - (i - 1) * 2.5, 2.5);
                    
                    let statusClass = '';
                    let icon = '';
                    
                    if (isLocked) {
                        statusClass = 'locked';
                        icon = `<svg viewBox="0 0 24 24" fill="#666"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>`;
                    } else if (isCompleted) {
                        statusClass = 'completed';
                        icon = `<svg viewBox="0 0 24 24" fill="#46d369"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>`;
                    } else if (isCurrent) {
                        statusClass = 'current';
                        icon = `<svg viewBox="0 0 24 24" fill="#ffd700"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM12 17c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z"/></svg>`;
                    } else {
                        icon = `<svg viewBox="0 0 24 24" fill="#888"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6zM18 20H6V10h12v10z"/></svg>`;
                    }
                    
                    const card = document.createElement('div');
                    card.className = `level-card ${statusClass}`;
                    card.innerHTML = `
                        ${icon}
                        <div class="level-num">${i}</div>
                        <div class="level-time">${time}s</div>
                    `;
                    card.onclick = () => this.startLevel(i);
                    grid.appendChild(card);
                }
            }

            // ==================== SHOP ====================
            updateShop() {
                document.getElementById('shop-diamonds').textContent = this.gameData.diamonds;
                document.getElementById('shop-lives').textContent = this.gameData.lives;
                
                // Life button state
                const buyLifeBtn = document.getElementById('buy-life-btn');
                buyLifeBtn.disabled = this.gameData.diamonds < 30 || this.gameData.lives >= this.gameData.maxLives;
                
                // Daily claim button state
                const dailyBtn = document.getElementById('daily-claim-btn');
                const canClaim = this.canClaimDaily();
                dailyBtn.disabled = !canClaim;
                dailyBtn.textContent = canClaim ? 'GRATIS' : 'SUDAH DIKLAIM';
                
                // Render avatars
                this.renderAvatars();
            }

            renderAvatars() {
                const normalContainer = document.getElementById('normal-avatars');
                const premiumContainer = document.getElementById('premium-avatars');
                
                normalContainer.innerHTML = '';
                premiumContainer.innerHTML = '';
                
                normalAvatars.forEach((svg, i) => {
                    const item = document.createElement('div');
                    item.className = `avatar-item ${this.gameData.selectedAvatar === i ? 'selected' : ''}`;
                    item.innerHTML = `<svg viewBox="0 0 24 24">${svg}</svg>`;
                    item.onclick = () => this.selectAvatar(i);
                    normalContainer.appendChild(item);
                });
                
                premiumAvatars.forEach((svg, i) => {
                    const item = document.createElement('div');
                    const avatarIndex = i + normalAvatars.length;
                    item.className = `avatar-item premium ${this.gameData.selectedAvatar === avatarIndex ? 'selected' : ''}`;
                    item.innerHTML = `<svg viewBox="0 0 24 24">${svg}</svg>`;
                    item.onclick = () => this.selectAvatar(avatarIndex);
                    premiumContainer.appendChild(item);
                });
            }

            selectAvatar(index) {
                // Premium avatars require verified
                if (index >= normalAvatars.length && !this.gameData.verified) {
                    this.showToast('Avatar premium hanya untuk akun verified!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                this.gameData.selectedAvatar = index;
                this.saveData();
                sound.play('CLICK');
                this.renderAvatars();
            }

            buyLife() {
                if (this.gameData.diamonds < 30) {
                    this.showToast('Diamond tidak cukup!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                if (this.gameData.lives >= this.gameData.maxLives) {
                    this.showToast('Nyawa sudah penuh!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                this.gameData.diamonds -= 30;
                this.gameData.lives++;
                this.saveData();
                
                sound.play('PURCHASE');
                this.showToast('+1 Nyawa!');
                this.updateShop();
            }

            // ==================== DAILY CLAIM ====================
            canClaimDaily() {
                if (!this.gameData.lastClaimDate) return true;
                
                const lastClaim = new Date(this.gameData.lastClaimDate);
                const today = new Date();
                
                return lastClaim.toDateString() !== today.toDateString();
            }

            checkDailyClaim() {
                if (this.canClaimDaily()) {
                    this.showDailyClaim();
                }
            }

            showDailyClaim() {
                sound.play('CLICK');
                
                // Update daily streak
                if (this.gameData.lastClaimDate) {
                    const lastClaim = new Date(this.gameData.lastClaimDate);
                    const today = new Date();
                    const diffDays = Math.floor((today - lastClaim) / (1000 * 60 * 60 * 24));
                    
                    if (diffDays === 1) {
                        // Consecutive day
                        this.gameData.dailyStreak = (this.gameData.dailyStreak % 7) + 1;
                    } else if (diffDays > 1) {
                        // Missed days, reset
                        this.gameData.dailyStreak = 1;
                    }
                }
                
                document.getElementById('daily-streak-num').textContent = this.gameData.dailyStreak;
                document.getElementById('daily-diamond-reward').textContent = dailyRewards[this.gameData.dailyStreak - 1];
                
                // Render days
                const daysContainer = document.getElementById('daily-days');
                daysContainer.innerHTML = '';
                
                for (let i = 1; i <= 7; i++) {
                    const day = document.createElement('div');
                    let dayClass = 'daily-day';
                    
                    if (i < this.gameData.dailyStreak) {
                        dayClass += ' claimed';
                    } else if (i === this.gameData.dailyStreak) {
                        dayClass += ' current';
                    } else {
                        dayClass += ' locked';
                    }
                    
                    day.className = dayClass;
                    day.innerHTML = `
                        <svg viewBox="0 0 24 24" fill="${i <= this.gameData.dailyStreak ? '#ffd700' : '#666'}">
                            <path d="M12 2L1 21h22L12 2z"/>
                        </svg>
                        <span>${dailyRewards[i - 1]}</span>
                    `;
                    daysContainer.appendChild(day);
                }
                
                // Update button state
                const claimBtn = document.getElementById('claim-daily-btn');
                if (this.canClaimDaily()) {
                    claimBtn.disabled = false;
                    claimBtn.textContent = 'KLAIM';
                } else {
                    claimBtn.disabled = true;
                    claimBtn.textContent = 'SUDAH DIKLAIM';
                }
                
                this.openModal('modal-daily');
            }

            claimDaily() {
                if (!this.canClaimDaily()) {
                    this.showToast('Sudah diklaim hari ini!', 'error');
                    sound.play('ERROR');
                    return;
                }
                
                const reward = dailyRewards[this.gameData.dailyStreak - 1];
                
                this.gameData.lives = Math.min(this.gameData.lives + 3, this.gameData.maxLives);
                this.gameData.diamonds += reward;
                this.gameData.lastClaimDate = new Date().toISOString();
                this.saveData();
                
                sound.play('DAILY_CLAIM');
                this.showToast(`+3 Nyawa & +${reward} Diamond!`);
                
                // Check diamond achievement
                if (this.gameData.diamonds >= 100) {
                    this.checkAchievement('diamond_100');
                }
                
                this.closeModal('modal-daily');
                this.updateMainMenu();
            }

            // ==================== PROFILE ====================
            updateProfile() {
                document.getElementById('profile-username').textContent = this.currentUser;
                
                // Verified badge
                const badge = document.getElementById('verified-badge');
                const card = document.getElementById('profile-card');
                
                if (this.gameData.verified) {
                    badge.style.display = 'inline';
                    card.classList.add('verified');
                } else {
                    badge.style.display = 'none';
                    card.classList.remove('verified');
                }
                
                // Update avatar
                const avatarDisplay = document.getElementById('profile-avatar-display');
                const avatarIndex = this.gameData.selectedAvatar || 0;
                const avatarSvg = avatarIndex < normalAvatars.length 
                    ? normalAvatars[avatarIndex] 
                    : premiumAvatars[avatarIndex - normalAvatars.length];
                avatarDisplay.innerHTML = `<svg viewBox="0 0 24 24">${avatarSvg}</svg>`;
                
                // Stats
                const winRate = this.gameData.stats.doorsOpened > 0 
                    ? Math.round((this.gameData.stats.correctDoors / this.gameData.stats.doorsOpened) * 100) 
                    : 0;
                
                document.getElementById('stat-games').textContent = this.gameData.stats.gamesPlayed;
                document.getElementById('stat-doors').textContent = this.gameData.stats.doorsOpened;
                document.getElementById('stat-deaths').textContent = this.gameData.stats.deaths;
                document.getElementById('stat-winrate').textContent = winRate + '%';
                document.getElementById('stat-level').textContent = this.gameData.currentLevel;
                document.getElementById('stat-diamond').textContent = this.gameData.diamonds;
                document.getElementById('stat-lives').textContent = this.gameData.lives;
                document.getElementById('stat-achievements').textContent = this.gameData.achievements.length + '/5';
                document.getElementById('stat-streak').textContent = this.gameData.highestStreak;
                document.getElementById('stat-time').textContent = this.gameData.stats.playTimeMinutes + 'm';
            }

            profileCardClick() {
                this.profileClickCount++;
                
                if (this.profileClickCount >= 6 && !this.gameData.verified) {
                    this.gameData.verified = true;
                    this.saveData();
                    sound.play('ACHIEVEMENT');
                    this.showToast('Akun Anda telah verified!');
                    this.updateProfile();
                    this.profileClickCount = 0;
                }
                
                // Reset after timeout
                setTimeout(() => {
                    this.profileClickCount = 0;
                }, 3000);
            }

            // ==================== ACHIEVEMENTS ====================
            renderAchievements() {
                const list = document.getElementById('achievements-list');
                list.innerHTML = '';
                
                achievementsData.forEach(ach => {
                    const unlocked = this.gameData.achievements.includes(ach.id);
                    
                    const card = document.createElement('div');
                    card.className = `achievement-card ${unlocked ? 'unlocked' : ''}`;
                    card.innerHTML = `
                        <div class="achievement-icon">
                            <svg viewBox="0 0 24 24">
                                <path d="M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2z"/>
                            </svg>
                        </div>
                        <div class="achievement-info">
                            <div class="achievement-name">${ach.name}</div>
                            <div class="achievement-desc">${ach.desc}</div>
                        </div>
                        <div class="achievement-status">
                            <svg viewBox="0 0 24 24" fill="${unlocked ? '#ffd700' : '#666'}">
                                ${unlocked 
                                    ? '<path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>'
                                    : '<path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>'}
                            </svg>
                        </div>
                    `;
                    list.appendChild(card);
                });
            }

            checkAchievement(id) {
                if (this.gameData.achievements.includes(id)) return;
                
                this.gameData.achievements.push(id);
                this.saveData();
                
                const ach = achievementsData.find(a => a.id === id);
                if (ach) {
                    sound.play('ACHIEVEMENT');
                    document.getElementById('achievement-name').textContent = ach.name;
                    document.getElementById('achievement-desc').textContent = ach.desc;
                    this.openModal('modal-achievement');
                }
            }

            // ==================== SETTINGS ====================
            updateSettings() {
                document.getElementById('toggle-sound').classList.toggle('active', this.gameData.settings.sound);
                document.getElementById('toggle-jumpscare').classList.toggle('active', this.gameData.settings.jumpscare);
                document.getElementById('toggle-vibration').classList.toggle('active', this.gameData.settings.vibration);
            }

            toggleSetting(setting) {
                sound.play('CLICK');
                this.gameData.settings[setting] = !this.gameData.settings[setting];
                
                if (setting === 'sound') {
                    sound.enabled = this.gameData.settings.sound;
                }
                
                this.saveData();
                this.updateSettings();
            }

            showLogoutConfirm() {
                sound.play('CLICK');
                this.openModal('modal-logout');
            }

            confirmLogout() {
                this.currentUser = null;
                this.gameData = null;
                localStorage.removeItem('d2dCurrentUser');
                
                sound.play('CLICK');
                this.closeModal('modal-logout');
                this.showScreen('auth-screen');
                this.showToast('Logout berhasil');
            }

            showResetConfirm() {
                sound.play('CLICK');
                this.openModal('modal-reset');
            }

            confirmReset() {
                this.accounts[this.currentUser].gameData = this.createDefaultGameData();
                this.gameData = this.accounts[this.currentUser].gameData;
                this.saveData();
                
                sound.play('CLICK');
                this.closeModal('modal-reset');
                this.showScreen('main-menu');
                this.showToast('Progress telah direset');
            }

            // ==================== HOW TO PLAY ====================
            showHowToPlay() {
                sound.play('CLICK');
                this.openModal('modal-howtoplay');
            }

            // ==================== CHEAT MENU ====================
            logoClick() {
                this.logoClickCount++;
                
                if (this.logoClickCount >= 3) {
                    sound.play('CLICK');
                    this.openModal('modal-cheat');
                    document.getElementById('cheat-password-section').style.display = 'block';
                    document.getElementById('cheat-controls').classList.remove('active');
                    document.getElementById('cheat-password').value = '';
                    this.logoClickCount = 0;
                }
                
                setTimeout(() => {
                    this.logoClickCount = 0;
                }, 2000);
            }

            unlockCheat() {
                const password = document.getElementById('cheat-password').value;
                
                if (password === 'D2D') {
                    sound.play('SUCCESS');
                    document.getElementById('cheat-password-section').style.display = 'none';
                    document.getElementById('cheat-controls').classList.add('active');
                    this.updateCheatDisplay();
                } else {
                    // Delete account as punishment
                    sound.play('ERROR');
                    this.showToast('Password salah! Akun dihapus!', 'error');
                    
                    delete this.accounts[this.currentUser];
                    this.currentUser = null;
                    this.gameData = null;
                    this.saveData();
                    
                    this.closeModal('modal-cheat');
                    this.showScreen('auth-screen');
                }
            }

            updateCheatDisplay() {
                document.getElementById('cheat-diamond').textContent = this.gameData.diamonds;
                document.getElementById('cheat-life').textContent = this.gameData.lives;
                document.getElementById('cheat-level').textContent = this.gameData.currentLevel;
                document.getElementById('toggle-ghost').classList.toggle('active', this.ghostMode);
            }

            cheatDiamond(amount) {
                this.gameData.diamonds = Math.max(0, this.gameData.diamonds + amount);
                this.saveData();
                sound.play('CLICK');
                this.updateCheatDisplay();
            }

            cheatLife(amount) {
                this.gameData.lives = Math.max(0, Math.min(this.gameData.maxLives, this.gameData.lives + amount));
                this.saveData();
                sound.play('CLICK');
                this.updateCheatDisplay();
            }

            cheatLevel(amount) {
                const newLevel = Math.max(1, Math.min(16, this.gameData.currentLevel + amount));
                this.gameData.currentLevel = newLevel;
                
                if (!this.gameData.unlockedLevels.includes(newLevel)) {
                    this.gameData.unlockedLevels.push(newLevel);
                }
                
                this.saveData();
                sound.play('CLICK');
                this.updateCheatDisplay();
            }

            toggleGhostMode() {
                this.ghostMode = !this.ghostMode;
                sound.play('CLICK');
                this.updateCheatDisplay();
                this.showToast(`Ghost Mode: ${this.ghostMode ? 'ON' : 'OFF'}`);
            }

            // ==================== DEBUG ====================
            avatarClick() {
                this.avatarClickCount++;
                
                if (this.avatarClickCount >= 3) {
                    sound.play('CLICK');
                    this.showDebugAccounts();
                    this.avatarClickCount = 0;
                }
                
                setTimeout(() => {
                    this.avatarClickCount = 0;
                }, 2000);
            }

            showDebugAccounts() {
                const container = document.getElementById('debug-accounts');
                container.innerHTML = '';
                
                Object.values(this.accounts).forEach(account => {
                    const div = document.createElement('div');
                    div.className = 'debug-account';
                    div.innerHTML = `
                        <div class="debug-account-header">
                            <span class="debug-account-name">${account.username}</span>
                            <button class="btn btn-gold" style="padding: 8px 16px; font-size: 12px;" onclick="game.forceLogin('${account.username}')">LOGIN</button>
                        </div>
                        <div class="debug-account-info">
                            <div><strong>Password:</strong> ${account.password}</div>
                            <div><strong>Level:</strong> ${account.gameData.currentLevel}</div>
                            <div><strong>Diamonds:</strong> ${account.gameData.diamonds}</div>
                            <div><strong>Lives:</strong> ${account.gameData.lives}</div>
                            <div><strong>Achievements:</strong> ${account.gameData.achievements.length}/5</div>
                            ${account.securityQuestion ? `<div><strong>Security Q:</strong> ${securityQuestions[account.securityQuestion]}</div>` : ''}
                            ${account.securityAnswer ? `<div><strong>Security A:</strong> ${account.securityAnswer}</div>` : ''}
                        </div>
                    `;
                    container.appendChild(div);
                });
                
                if (Object.keys(this.accounts).length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">Belum ada akun terdaftar</p>';
                }
                
                this.openModal('modal-debug');
            }

            // ==================== MODAL SYSTEM ====================
            openModal(modalId) {
                document.getElementById(modalId).classList.add('active');
            }

            closeModal(modalId) {
                document.getElementById(modalId).classList.remove('active');
            }

            // ==================== TOAST SYSTEM ====================
            showToast(message, type = 'success') {
                const container = document.getElementById('toast-container');
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                
                const icon = type === 'success' 
                    ? '<svg viewBox="0 0 24 24" fill="#46d369" width="20" height="20"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>'
                    : type === 'error'
                    ? '<svg viewBox="0 0 24 24" fill="#e50914" width="20" height="20"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>'
                    : '<svg viewBox="0 0 24 24" fill="#ffd700" width="20" height="20"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg>';
                
                toast.innerHTML = icon + `<span>${message}</span>`;
                container.appendChild(toast);
                
                setTimeout(() => {
                    toast.classList.add('hiding');
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }

            // ==================== MIDNIGHT RESET ====================
            initMidnightCheck() {
                setInterval(() => {
                    if (!this.gameData) return;
                    
                    const now = new Date();
                    if (now.getHours() === 0 && now.getMinutes() === 0 && now.getSeconds() < 2) {
                        if (this.gameData.lives < 3) {
                            this.gameData.lives = 3;
                            this.saveData();
                            this.showToast('Nyawa telah direset!');
                            
                            if (document.getElementById('main-menu').classList.contains('active')) {
                                this.updateMainMenu();
                            }
                        }
                    }
                }, 1000);
            }
        }

        // ==================== INITIALIZE GAME ====================
        const game = new Game();

        // Initialize sound on first interaction
        document.addEventListener('click', () => {
            sound.init();
        }, { once: true });

        document.addEventListener('touchstart', () => {
            sound.init();
        }, { once: true });
    </script>
</body>
  </html>
